# UNO A Final Smoke Test (30분 루틴)

> **문서 버전**: 1.0
> **실행 시점**: 프로덕션 배포 직전 + 배포 직후
> **예상 소요**: 30분

---

## 사전 준비

- [ ] 테스트 디바이스 준비 (Android + iOS + Web)
- [ ] 프로덕션 빌드 설치 완료
- [ ] Sentry 대시보드 접근 가능
- [ ] Supabase 대시보드 접근 가능

---

## 1. 인증 (5분)

### 1.1 회원가입
- [ ] 이메일 가입 → 인증 메일 수신 확인
- [ ] 프로필 생성 → 닉네임, 아바타 설정
- [ ] 연령 확인 → 14세 미만 차단 확인

### 1.2 로그인/로그아웃
- [ ] 이메일 로그인 → 홈 화면 도달
- [ ] 로그아웃 → 로그인 화면 복귀
- [ ] 재로그인 → 이전 프로필 유지 확인

### 1.3 DB 확인
- [ ] `user_profiles` 레코드 생성 확인
- [ ] `role` 필드 = 'fan' 확인

---

## 2. 결제 (5분)

### 2.1 DT 충전
- [ ] 월렛 화면 → DT 충전 → 금액 선택
- [ ] TossPayments 결제창 → 테스트 결제 완료
- [ ] 잔액 업데이트 확인

### 2.2 구독
- [ ] 아티스트 프로필 → 구독 버튼
- [ ] 티어 선택 (BASIC) → 결제
- [ ] `subscriptions` 레코드 생성 확인
- [ ] 채팅방 접근 가능 확인

### 2.3 DB 확인
- [ ] `dt_purchases` 레코드 생성 확인
- [ ] `wallet_ledger` 잔액 정합성 확인
- [ ] `payment_webhook_logs` 성공 레코드 확인

---

## 3. 채팅 (5분)

### 3.1 팬 메시지
- [ ] 구독 채팅방 입장 → 크리에이터 메시지 표시 확인
- [ ] 답글 입력 → 토큰 차감 확인
- [ ] 글자 제한 작동 확인

### 3.2 크리에이터 브로드캐스트
- [ ] 크리에이터 계정 전환
- [ ] 내 채널 탭 → 메시지 입력 → 전체 전송
- [ ] 팬 계정에서 메시지 수신 확인

### 3.3 실시간 확인
- [ ] 메시지 전송 → 2초 이내 수신 (Supabase Realtime)
- [ ] 하트 반응 → 실시간 업데이트

---

## 4. 동의 (3분)

### 4.1 마케팅 동의 토글
- [ ] 설정 → 마케팅 동의 → 이메일 ON
- [ ] 에러 없음 확인 (Console/Sentry)
- [ ] 이메일 OFF → 즉시 반영

### 4.2 DB 확인
- [ ] `user_consents` 레코드 확인
- [ ] `version` = 'v1.0.0' 확인 (**WI-P0-2 핵심**)
- [ ] `consent_history` 트리거 기록 확인

---

## 5. 신고/차단 (3분)

### 5.1 메시지 신고
- [ ] 메시지 long-press → 신고 선택
- [ ] 사유 선택 → 제출
- [ ] `reports` 레코드 생성 확인

### 5.2 사용자 차단
- [ ] 메시지 long-press → 차단 선택
- [ ] 확인 다이얼로그 → 차단
- [ ] `user_blocks` 레코드 확인
- [ ] 차단된 사용자 메시지 비표시 확인

### 5.3 팬 숨기기 (크리에이터)
- [ ] 크리에이터 채팅 → 팬 메시지 long-press → 숨기기
- [ ] `hidden_fans` 레코드 확인
- [ ] 숨겨진 팬 메시지 비표시 확인

---

## 6. 법적 링크 (2분)

- [ ] 설정 → 개인정보 처리방침 → 외부 브라우저 오픈
- [ ] 설정 → 서비스 이용약관 → 외부 브라우저 오픈
- [ ] 설정 → 환불 정책 → 화면 표시
- [ ] 설정 → 수수료 정책 → 화면 표시
- [ ] 설정 → 회사 정보 → 화면 표시

---

## 7. 다크 모드 (1분)

- [ ] 설정 → 다크 모드 토글 ON
- [ ] 홈 화면 → 정상 렌더링 확인
- [ ] 채팅 화면 → 정상 렌더링 확인
- [ ] 설정 화면 → 정상 렌더링 확인
- [ ] 다크 모드 토글 OFF → 복귀 확인

---

## 8. 네트워크 (3분)

### 8.1 오프라인 동작
- [ ] 비행기 모드 ON
- [ ] 앱 사용 시도 → 에러 UX 표시 확인 (크래시 아님)
- [ ] 비행기 모드 OFF → 자동 복구 확인

### 8.2 느린 네트워크
- [ ] 로딩 스켈레톤 표시 확인
- [ ] 타임아웃 → 재시도 버튼 표시 확인

---

## 9. 모니터링 (3분)

### 9.1 Sentry
- [ ] Sentry 대시보드 → 새 에러 이슈 0건 확인
- [ ] 크래시-프리 세션 비율 확인

### 9.2 Firebase
- [ ] Analytics → 실시간 이벤트 수신 확인
- [ ] FCM → 테스트 푸시 전송 → 수신 확인

### 9.3 Supabase
- [ ] Dashboard → DB 응답 시간 확인
- [ ] Realtime → 연결 상태 확인

---

## 결과 기록

```
실행일: YYYY-MM-DD HH:MM
실행자: [이름]
환경: [디바이스/OS/빌드 번호]

총 항목: 50
통과: ___
실패: ___
스킵: ___

실패 항목:
1. [항목] — [사유]
2. [항목] — [사유]

결론: PASS / FAIL / CONDITIONAL PASS
비고: [추가 메모]
```
