import * as notion from 'notion-types';
import { FetchOptions } from 'ofetch';

interface SignedUrlRequest {
    permissionRecord: PermissionRecord;
    url: string;
}
interface PermissionRecord {
    table: string;
    id: notion.ID;
}
interface SignedUrlResponse {
    signedUrls: string[];
}

/**
 * Main Notion API client.
 */
declare class NotionAPI {
    private readonly _apiBaseUrl;
    private readonly _authToken?;
    private readonly _activeUser?;
    private readonly _userTimeZone;
    private readonly _ofetchOptions?;
    constructor({ apiBaseUrl, authToken, activeUser, userTimeZone, ofetchOptions }?: {
        apiBaseUrl?: string;
        authToken?: string;
        userLocale?: string;
        userTimeZone?: string;
        activeUser?: string;
        ofetchOptions?: FetchOptions;
    });
    getPage(pageId: string, { concurrency, fetchMissingBlocks, fetchCollections, signFileUrls, chunkLimit, chunkNumber, throwOnCollectionErrors, collectionReducerLimit, fetchRelationPages, ofetchOptions }?: {
        concurrency?: number;
        fetchMissingBlocks?: boolean;
        fetchCollections?: boolean;
        signFileUrls?: boolean;
        chunkLimit?: number;
        chunkNumber?: number;
        throwOnCollectionErrors?: boolean;
        collectionReducerLimit?: number;
        fetchRelationPages?: boolean;
        ofetchOptions?: FetchOptions;
    }): Promise<notion.ExtendedRecordMap>;
    fetchRelationPages: (recordMap: notion.ExtendedRecordMap, ofetchOptions: FetchOptions | undefined) => Promise<notion.BlockMap>;
    extractRelationPageIdsFromBlock: (blockValue: any, collectionSchema: any) => Set<string>;
    addSignedUrls({ recordMap, contentBlockIds, ofetchOptions }: {
        recordMap: notion.ExtendedRecordMap;
        contentBlockIds?: string[];
        ofetchOptions?: FetchOptions;
    }): Promise<void>;
    getPageRaw(pageId: string, { ofetchOptions, chunkLimit, chunkNumber }?: {
        chunkLimit?: number;
        chunkNumber?: number;
        ofetchOptions?: FetchOptions;
    }): Promise<notion.PageChunk>;
    getCollectionData(collectionId: string, collectionViewId: string, collectionView?: any, { limit, searchQuery, userTimeZone, loadContentCover, spaceId, ofetchOptions }?: {
        type?: notion.CollectionViewType;
        limit?: number;
        searchQuery?: string;
        userTimeZone?: string;
        userLocale?: string;
        loadContentCover?: boolean;
        spaceId?: string;
        ofetchOptions?: FetchOptions;
    }): Promise<notion.CollectionInstance>;
    getUsers(userIds: string[], ofetchOptions?: FetchOptions): Promise<notion.RecordValues<notion.User>>;
    getBlocks(blockIds: string[], ofetchOptions?: FetchOptions): Promise<notion.PageChunk>;
    getSignedFileUrls(urls: SignedUrlRequest[], ofetchOptions?: FetchOptions): Promise<SignedUrlResponse>;
    search(params: notion.SearchParams, ofetchOptions?: FetchOptions): Promise<notion.SearchResults>;
    fetch<T>({ endpoint, body, ofetchOptions, headers: clientHeaders }: {
        endpoint: string;
        body: object;
        ofetchOptions?: FetchOptions;
        headers?: any;
    }): Promise<T>;
}

export { NotionAPI, type PermissionRecord, type SignedUrlRequest, type SignedUrlResponse };
