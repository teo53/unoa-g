"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3582],{508:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(1847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3791:(e,a,t)=>{t.d(a,{r:()=>b});var r=t(5155),l=t(2115),s=t(6046),n=t(8085),i=t(1847);let o=(0,i.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var d=t(8314);let c=(0,i.A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var p=t(4784);function b(e){let{status:a,version:t,hasPublishedSnapshot:i,onSaveDraft:b,onSubmitReview:m,onPublish:h,onRollback:x,onArchive:g,disabled:u=!1,itemLabel:f="이 항목"}=e,[y,v]=(0,l.useState)(null),[j,w]=(0,l.useState)(null);async function N(e,a){v(e);try{await a()}finally{v(null)}}async function k(){if(j){v(j.action);try{await j.fn()}finally{v(null),w(null)}}}let _=null!==y;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[("draft"===a||"in_review"===a)&&(0,r.jsxs)("button",{className:"inline-flex items-center gap-1.5 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",disabled:u||_,onClick:()=>N("save",b),children:["save"===y?(0,r.jsx)("span",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(s.A,{className:"w-4 h-4"}),"초안 저장"]}),"draft"===a&&m&&(0,r.jsxs)("button",{className:"inline-flex items-center gap-1.5 px-4 py-2 text-sm font-medium text-yellow-700 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 disabled:opacity-50",disabled:u||_,onClick:()=>N("submit",m),children:["submit"===y?(0,r.jsx)("span",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(n.A,{className:"w-4 h-4"}),"검수 요청"]}),("draft"===a||"in_review"===a)&&(0,r.jsxs)("button",{className:"inline-flex items-center gap-1.5 px-4 py-2 text-sm font-medium text-green-700 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 disabled:opacity-50",disabled:u||_,onClick:()=>w({action:"publish",title:"게시 확인",description:"".concat(f,"이(가) 모든 사용자에게 표시됩니다."),variant:"success",confirmLabel:"게시",fn:h}),children:["publish"===y?(0,r.jsx)("span",{className:"w-4 h-4 border-2 border-green-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(o,{className:"w-4 h-4"}),"게시"]}),"published"===a&&i&&x&&(0,r.jsxs)("button",{className:"inline-flex items-center gap-1.5 px-4 py-2 text-sm font-medium text-orange-700 bg-orange-50 border border-orange-200 rounded-lg hover:bg-orange-100 disabled:opacity-50",disabled:u||_,onClick:()=>w({action:"rollback",title:"롤백 확인",description:"".concat(f,"을(를) 이전 상태로 되돌립니다. 게시가 해제됩니다."),variant:"warning",confirmLabel:"롤백",fn:x}),children:["rollback"===y?(0,r.jsx)("span",{className:"w-4 h-4 border-2 border-orange-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(d.A,{className:"w-4 h-4"}),"롤백"]}),"archived"!==a&&g&&(0,r.jsxs)("button",{className:"inline-flex items-center gap-1.5 px-4 py-2 text-sm font-medium text-red-700 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 disabled:opacity-50",disabled:u||_,onClick:()=>w({action:"archive",title:"보관 확인",description:"".concat(f,"을(를) 보관합니다. 사용자에게 더 이상 표시되지 않습니다."),variant:"danger",confirmLabel:"보관",fn:g}),children:["archive"===y?(0,r.jsx)("span",{className:"w-4 h-4 border-2 border-red-400 border-t-transparent rounded-full animate-spin"}):(0,r.jsx)(c,{className:"w-4 h-4"}),"보관"]}),(0,r.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["v",t]})]}),j&&(0,r.jsx)(p.C,{open:!!j,onClose:()=>w(null),onConfirm:k,title:j.title,description:j.description,variant:j.variant,confirmLabel:j.confirmLabel,loading:y===j.action})]})}},5626:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6046:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(1847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6738:(e,a,t)=>{t.d(a,{M2:()=>r,au:()=>s,et:()=>l,fn:()=>n});let r={draft:{label:"초안",color:"text-gray-700",bgColor:"bg-gray-100"},in_review:{label:"검수 중",color:"text-yellow-700",bgColor:"bg-yellow-100"},published:{label:"게시됨",color:"text-green-700",bgColor:"bg-green-100"},archived:{label:"보관됨",color:"text-red-700",bgColor:"bg-red-100"}},l={home_top:"홈 상단",home_bottom:"홈 하단",discover_top:"탐색 상단",chat_top:"채팅 상단",profile_banner:"프로필 배너",popup:"팝업"},s={home_top:{width:1200,height:300,label:"홈 상단",description:"메인 히어로 배너 — 풀 너비",aspectRatio:"4:1",safeZone:"좌우 16px 여백"},home_bottom:{width:1200,height:200,label:"홈 하단",description:"보조 프로모션 띠 배너",aspectRatio:"6:1"},discover_top:{width:800,height:400,label:"탐색 상단",description:"탐색 페이지 배너",aspectRatio:"2:1"},chat_top:{width:600,height:150,label:"채팅 상단",description:"채팅 리스트 상단 띠",aspectRatio:"4:1"},profile_banner:{width:800,height:300,label:"프로필 배너",description:"프로필 헤더 영역",aspectRatio:"8:3"},popup:{width:600,height:800,label:"팝업",description:"모달 팝업 (세로)",aspectRatio:"3:4"}},n={viewer:"뷰어",operator:"운영자",publisher:"발행자",admin:"관리자"}},6983:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(1847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8085:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(1847).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},8708:(e,a,t)=>{t.d(a,{s:()=>p});var r=t(5155),l=t(2115),s=t(6983),n=t(508),i=t(9630);function o(e){let{fieldKey:a,before:t,after:l}=e;return(0,r.jsxs)("div",{className:"text-xs font-mono mt-1",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:[a,": "]}),void 0!==t&&(0,r.jsx)("span",{className:"bg-red-50 text-red-700 line-through px-1 rounded mr-1",children:JSON.stringify(t)}),void 0!==l&&(0,r.jsx)("span",{className:"bg-green-50 text-green-700 px-1 rounded",children:JSON.stringify(l)})]})}function d(e){let{before:a,after:t}=e;if(!a&&!t)return null;let l=new Set;return(a&&Object.keys(a).forEach(e=>l.add(e)),t&&Object.keys(t).forEach(e=>l.add(e)),0===l.size)?null:(0,r.jsx)("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs",children:Array.from(l).map(e=>(0,r.jsx)(o,{fieldKey:e,before:null==a?void 0:a[e],after:null==t?void 0:t[e]},e))})}let c={"banner.create":"배너 생성","banner.update":"배너 수정","banner.submit_review":"검수 요청","banner.publish":"배너 게시","banner.rollback":"배너 롤백","banner.archive":"배너 보관","flag.create":"플래그 생성","flag.update":"플래그 수정","flag.publish":"플래그 게시","flag.rollback":"플래그 롤백","asset.upload":"에셋 업로드","asset.delete":"에셋 삭제","staff.create":"스태프 추가","staff.update":"스태프 수정","staff.remove":"스태프 삭제"};function p(e){let{entityType:a,entityId:t}=e,[o,p]=(0,l.useState)([]),[b,m]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{!async function(){try{let e=await (0,i._v)({entity_type:a,entity_id:t,limit:20});p(e.items)}catch(e){}finally{m(!1)}}()},[a,t]),b)?(0,r.jsx)("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"h-12 bg-gray-100 rounded"},e))}):0===o.length?(0,r.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"변경 이력이 없습니다."}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),(0,r.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,r.jsxs)("div",{className:"relative pl-10",children:[(0,r.jsx)("div",{className:"absolute left-2.5 top-1.5 w-3 h-3 rounded-full bg-blue-500 border-2 border-white"}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:c[e.action]||e.action}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,r.jsx)(s.A,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleString("ko-KR")]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-500",children:[(0,r.jsx)(n.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:e.actor_role})]}),(0,r.jsx)(d,{before:e.before,after:e.after})]})]},e.id))})]})}},8876:(e,a,t)=>{t.d(a,{a:()=>s});var r=t(5155),l=t(6738);function s(e){let{status:a,size:t="md"}=e,s=l.M2[a]||{label:a,color:"text-gray-700",bgColor:"bg-gray-100"};return(0,r.jsx)("span",{className:"inline-flex items-center rounded-full font-medium ".concat(s.bgColor," ").concat(s.color," ").concat("sm"===t?"text-xs px-2 py-0.5":"text-sm px-2.5 py-1"),children:s.label})}}}]);