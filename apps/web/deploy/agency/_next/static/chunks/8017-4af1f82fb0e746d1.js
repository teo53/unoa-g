"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8017],{1360:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1847:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(2115);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:d="",children:c,iconNode:u,...f}=e;return(0,a.createElement)("svg",{ref:t,...i,width:o,height:o,stroke:r,strokeWidth:l?24*Number(s)/Number(o):s,className:n("lucide",d),...f},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),s=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:s,...l}=r;return(0,a.createElement)(o,{ref:i,iconNode:t,className:n("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),s),...l})});return r.displayName="".concat(e),r}},2056:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2529:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4784:(e,t,r)=>{r.d(t,{C:()=>u});var a=r(5155),n=r(2115),i=r(1360),o=r(8314),s=r(2529),l=r(2056),d=r(5229);let c={danger:{icon:i.A,iconColor:"text-red-600 bg-red-100",btnColor:"bg-red-600 hover:bg-red-700 focus-visible:ring-red-500"},warning:{icon:o.A,iconColor:"text-orange-600 bg-orange-100",btnColor:"bg-orange-600 hover:bg-orange-700 focus-visible:ring-orange-500"},success:{icon:s.A,iconColor:"text-green-600 bg-green-100",btnColor:"bg-green-600 hover:bg-green-700 focus-visible:ring-green-500"},info:{icon:l.A,iconColor:"text-blue-600 bg-blue-100",btnColor:"bg-blue-600 hover:bg-blue-700 focus-visible:ring-blue-500"}};function u(e){let{open:t,onClose:r,onConfirm:i,title:o,description:s,children:l,variant:u="info",confirmLabel:f="확인",cancelLabel:p="취소",confirmText:m,loading:b=!1}=e,y=(0,n.useRef)(null),g=(0,n.useRef)(null),_=(0,n.useRef)(null),h=(0,n.useRef)("");(0,n.useEffect)(()=>{if(!t)return;let e=setTimeout(()=>{m&&_.current?_.current.focus():g.current&&g.current.focus()},50);return()=>clearTimeout(e)},[t,m]),(0,n.useEffect)(()=>{if(t)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e);function e(e){"Escape"===e.key&&r()}},[t,r]),(0,n.useEffect)(()=>{if(!t)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[t]);let v=(0,n.useCallback)(e=>{e.target===y.current&&r()},[r]);if(!t)return null;let x=c[u],w=x.icon,k=!!m;return(0,a.jsx)("div",{ref:y,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",onClick:v,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 animate-in zoom-in-95 duration-200",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 p-6 pb-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat(x.iconColor),children:(0,a.jsx)(w,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:o}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s})]}),(0,a.jsx)("button",{className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",onClick:r,"aria-label":"닫기",children:(0,a.jsx)(d.A,{className:"w-5 h-5"})})]}),l&&(0,a.jsx)("div",{className:"px-6 pb-4",children:l}),k&&(0,a.jsxs)("div",{className:"px-6 pb-4",children:[(0,a.jsxs)("label",{className:"block text-sm text-gray-600 mb-2",children:["계속하려면 ",(0,a.jsx)("span",{className:"font-mono font-bold text-gray-900",children:m}),"을(를) 입력하세요"]}),(0,a.jsx)("input",{ref:_,type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:m,onChange:e=>{h.current=e.target.value},autoComplete:"off",spellCheck:!1})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-xl",children:[(0,a.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus-visible:ring-2 focus-visible:ring-gray-500 disabled:opacity-50",onClick:r,disabled:b,children:p}),(0,a.jsx)("button",{ref:g,className:"px-4 py-2 text-sm font-medium text-white rounded-lg focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 ".concat(x.btnColor),onClick:async()=>{k&&h.current!==m||await i()},disabled:b,children:b?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"처리 중..."]}):f})]})]})})}},5229:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8314:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},9630:(e,t,r)=>{r.d(t,{AO:()=>b,E3:()=>A,FR:()=>m,LO:()=>w,WR:()=>x,Xo:()=>v,Zt:()=>_,_v:()=>Z,cQ:()=>h,cb:()=>u,g8:()=>E,j$:()=>g,jB:()=>N,jd:()=>f,lA:()=>c,ny:()=>j,qs:()=>p,s1:()=>y,tV:()=>T,wx:()=>L,yZ:()=>C,zU:()=>k});var a=r(5417),n=r(7376),i=r(5704);let o=[{id:"demo-banner-1",title:"신규 아티스트 오픈 기념 이벤트",placement:"home_top",image_url:"https://picsum.photos/seed/banner1/800/400",link_url:"/discover",link_type:"internal",status:"published",priority:10,start_at:null,end_at:null,target_audience:"all",version:2,published_snapshot:null,created_by:"demo-ops-1",updated_by:"demo-ops-1",created_at:"2025-12-01T00:00:00Z",updated_at:"2025-12-10T00:00:00Z"},{id:"demo-banner-2",title:"VIP 전용 특별 혜택",placement:"home_bottom",image_url:"https://picsum.photos/seed/banner2/800/400",link_url:"/subscriptions",link_type:"internal",status:"draft",priority:5,start_at:null,end_at:null,target_audience:"vip",version:1,published_snapshot:null,created_by:"demo-ops-1",updated_by:null,created_at:"2025-12-15T00:00:00Z",updated_at:"2025-12-15T00:00:00Z"}],s=[{id:"demo-flag-1",flag_key:"dark_mode_v2",title:"다크 모드 v2",description:"새로운 다크 모드 디자인 테스트",status:"published",enabled:!0,rollout_percent:50,payload:{variant:"new_palette"},version:3,published_snapshot:null,created_by:"demo-ops-1",updated_by:"demo-ops-1",created_at:"2025-11-01T00:00:00Z",updated_at:"2025-12-05T00:00:00Z"},{id:"demo-flag-2",flag_key:"gift_feature",title:"선물 기능",description:"팬 간 선물 전송 기능",status:"draft",enabled:!1,rollout_percent:0,payload:{},version:1,published_snapshot:null,created_by:"demo-ops-1",updated_by:null,created_at:"2025-12-20T00:00:00Z",updated_at:"2025-12-20T00:00:00Z"}],l=[{id:"demo-audit-1",actor_id:"demo-ops-1",actor_role:"publisher",action:"banner.publish",entity_type:"ops_banners",entity_id:"demo-banner-1",before:{status:"in_review"},after:{status:"published"},metadata:{},created_at:"2025-12-10T14:30:00Z"},{id:"demo-audit-2",actor_id:"demo-ops-1",actor_role:"operator",action:"flag.create",entity_type:"ops_feature_flags",entity_id:"demo-flag-2",before:null,after:{flag_key:"gift_feature",title:"선물 기능"},metadata:{},created_at:"2025-12-20T09:00:00Z"},{id:"demo-audit-3",actor_id:"demo-ops-2",actor_role:"admin",action:"settlement.approve",entity_type:"settlements",entity_id:"settlement-2026-01-waker",before:{status:"pending"},after:{status:"approved",title:"WAKER 2026-01월 정산 승인"},metadata:{artist_name:"WAKER",period:"2026-01"},created_at:"2026-02-05T10:15:00Z"},{id:"demo-audit-4",actor_id:"demo-ops-2",actor_role:"admin",action:"settlement.reject",entity_type:"settlements",entity_id:"settlement-2026-01-moonlight",before:{status:"pending"},after:{status:"rejected",reason:"서류 미비",title:"MOONLIGHT 정산 반려 (서류 미비)"},metadata:{artist_name:"MOONLIGHT",period:"2026-01"},created_at:"2026-02-07T14:22:00Z"},{id:"demo-audit-5",actor_id:"demo-ops-3",actor_role:"moderator",action:"creator.warn",entity_type:"creators",entity_id:"creator-starlight",before:{warning_count:0},after:{warning_count:1,title:"크리에이터 '별빛' 경고 발송"},metadata:{reason:"부적절한 콘텐츠 게시"},created_at:"2026-02-08T16:45:00Z"},{id:"demo-audit-6",actor_id:"demo-ops-3",actor_role:"moderator",action:"creator.suspend",entity_type:"creators",entity_id:"creator-baduser",before:{status:"active"},after:{status:"suspended",title:"크리에이터 '악성유저' 정지 처리"},metadata:{reason:"약관 위반 (중복)",duration_days:30},created_at:"2026-02-10T11:30:00Z"},{id:"demo-audit-7",actor_id:"demo-ops-4",actor_role:"moderator",action:"report.resolve",entity_type:"reports",entity_id:"rpt-002",before:{status:"reviewing"},after:{status:"resolved",title:"신고 #rpt-002 해결 처리",action_taken:"경고 발송"},metadata:{report_type:"harassment"},created_at:"2026-02-11T09:18:00Z"},{id:"demo-audit-8",actor_id:"demo-ops-5",actor_role:"operator",action:"payment.refund",entity_type:"payments",entity_id:"pay-007",before:{status:"completed"},after:{status:"refunded",title:"펀딩 결제 환불 처리 (#pay-007)",amount:9900},metadata:{reason:"고객 요청",refund_method:"original"},created_at:"2026-02-12T13:50:00Z"}];async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){let e=i.env.NEXT_PUBLIC_SUPABASE_URL||"",t=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";return(0,a.createBrowserClient)(e,t)}(),{data:{session:n}}=await r.auth.getSession();if(!(null==n?void 0:n.access_token))throw Error("인증이 필요합니다. 다시 로그인해주세요.");let o="".concat(i.env.NEXT_PUBLIC_SUPABASE_URL,"/functions/v1/ops-manage"),s=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.access_token)},body:JSON.stringify({action:e,payload:t})}),l=await s.json();if(!l.success)throw Error(l.error||"요청 실패 (".concat(s.status,")"));return l.data}async function c(){return n.Gc?[]:d("staff.list")}async function u(e,t,r){return d("staff.upsert",{target_user_id:e,role:t,display_name:r})}async function f(e){await d("staff.remove",{target_user_id:e})}async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.Gc?{items:[],total:0}:d("asset.list",e)}async function m(e){return d("asset.upload_complete",e)}async function b(e){await d("asset.delete",{id:e})}async function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.Gc?o:d("banner.list",e)}async function g(e){if(n.Gc){let t=o.find(t=>t.id===e);if(!t)throw Error("배너를 찾을 수 없습니다");return t}return d("banner.get",{id:e})}async function _(e){return n.Gc?{...o[0],...e,id:"demo-banner-".concat(Date.now()),status:"draft",version:1}:d("banner.create",{...e})}async function h(e,t,r){if(n.Gc){let a=o.find(t=>t.id===e);if(!a)throw Error("배너를 찾을 수 없습니다");return{...a,...r,version:t+1}}return d("banner.update",{id:e,expected_version:t,...r})}async function v(e,t){return d("banner.submit_review",{id:e,expected_version:t})}async function x(e,t){return d("banner.publish",{id:e,expected_version:t})}async function w(e){return d("banner.rollback",{id:e})}async function k(e,t){return d("banner.archive",{id:e,expected_version:t})}async function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.Gc?s:d("flag.list",e)}async function N(e){if(n.Gc){let t=s.find(t=>t.id===e);if(!t)throw Error("플래그를 찾을 수 없습니다");return t}return d("flag.get",{id:e})}async function j(e){return n.Gc?{...s[0],...e,payload:e.payload_data,id:"demo-flag-".concat(Date.now()),status:"draft",version:1}:d("flag.create",{...e})}async function C(e,t,r){if(n.Gc){let a=s.find(t=>t.id===e);if(!a)throw Error("플래그를 찾을 수 없습니다");return{...a,...r,version:t+1}}return d("flag.update",{id:e,expected_version:t,...r})}async function E(e,t){return d("flag.publish",{id:e,expected_version:t})}async function T(e){return d("flag.rollback",{id:e})}async function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.Gc?{items:l,total:l.length}:d("audit.list",e)}async function L(){if(n.Gc)return{activeBanners:o.filter(e=>"published"===e.status).length,activeFlags:s.filter(e=>"published"===e.status).length,pendingReview:o.filter(e=>"in_review"===e.status).length,recentChanges:l.slice(0,5)};let[e,t,r]=await Promise.all([y(),A(),Z({limit:5})]);return{activeBanners:e.filter(e=>"published"===e.status).length,activeFlags:t.filter(e=>"published"===e.status).length,pendingReview:e.filter(e=>"in_review"===e.status).length,recentChanges:r.items}}}}]);