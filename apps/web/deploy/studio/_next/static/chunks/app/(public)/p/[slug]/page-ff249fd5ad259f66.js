(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8272,8525],{3564:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2821),l=s(5889);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}},4409:(e,t,s)=>{Promise.resolve().then(s.bind(s,6211)),Promise.resolve().then(s.t.bind(s,2619,23))},4679:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,L3:()=>g,c7:()=>h,lG:()=>d});var a=s(5155),l=s(2115),r=s(3564),n=s(5229);let i=l.createContext(void 0),c=()=>{let e=l.useContext(i);if(!e)throw Error("useDialog must be used within a Dialog");return e},d=e=>{let{open:t=!1,onOpenChange:s,children:r}=e,[n,c]=l.useState(t),d=void 0!==s,o=d?t:n;return(0,a.jsx)(i.Provider,{value:{open:o,onOpenChange:d?s:c},children:r})};l.forwardRef((e,t)=>{let{asChild:s,children:r,onClick:n,...i}=e,{onOpenChange:d}=c(),o=e=>{null==n||n(e),d(!0)};return s&&l.isValidElement(r)?l.cloneElement(r,{onClick:o,ref:t}):(0,a.jsx)("button",{ref:t,onClick:o,...i,children:r})}).displayName="DialogTrigger";let o=e=>{let{children:t}=e,{open:s}=c();return s?(0,a.jsx)(a.Fragment,{children:t}):null},x=l.forwardRef((e,t)=>{let{className:s,...l}=e,{onOpenChange:n}=c();return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),onClick:()=>n(!1),...l})});x.displayName="DialogOverlay";let m=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e,{onOpenChange:d}=c();return(0,a.jsxs)(o,{children:[(0,a.jsx)(x,{}),(0,a.jsxs)("div",{ref:t,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),onClick:e=>e.stopPropagation(),...i,children:[l,(0,a.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",onClick:()=>d(!1),children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName="DialogContent";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};h.displayName="DialogHeader";let g=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h2",{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});g.displayName="DialogTitle",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})}).displayName="DialogDescription"},6211:(e,t,s)=>{"use strict";s.d(t,{CampaignDetailClient:()=>ew});var a=s(5155),l=s(2115),r=s(7812),n=s(3564);let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l})});i.displayName="Avatar";let c=l.forwardRef((e,t)=>{let{className:s,src:r,alt:i,...c}=e,[d,o]=l.useState(!1);return!r||d?null:(0,a.jsx)("img",{ref:t,src:r,alt:i,className:(0,n.cn)("aspect-square h-full w-full object-cover",s),onError:()=>o(!0),...c})});c.displayName="AvatarImage";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...l})});function o(e){var t;let{campaign:s}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[s.category&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.E,{variant:"secondary",className:"bg-pink-100 text-pink-700 hover:bg-pink-100",children:{"K-POP":"K-POP",concert:"콘서트",goods:"굿즈",music:"음악",event:"이벤트"}[s.category]||s.category}),"active"===s.status&&(0,a.jsx)(r.E,{variant:"default",className:"bg-green-500 hover:bg-green-500",children:"진행중"}),"completed"===s.status&&(0,a.jsx)(r.E,{variant:"secondary",className:"bg-gray-500 text-white hover:bg-gray-500",children:"종료"})]}),(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 leading-tight",children:s.title}),s.subtitle&&(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:s.subtitle}),s.creator&&(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,a.jsxs)(i,{className:"h-10 w-10",children:[(0,a.jsx)(c,{src:s.creator.avatar_url||void 0,alt:s.creator.display_name||""}),(0,a.jsx)(d,{className:"bg-pink-100 text-pink-600",children:(null==(t=s.creator.display_name)?void 0:t.charAt(0))||"?"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:s.creator.display_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"크리에이터"})]})]})]})}d.displayName="AvatarFallback";let x=l.forwardRef((e,t)=>{let{className:s,value:l=0,max:r=100,indicatorClassName:i,...c}=e,d=Math.min(Math.max(l/r*100,0),100);return(0,a.jsx)("div",{ref:t,role:"progressbar","aria-valuemin":0,"aria-valuemax":r,"aria-valuenow":l,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...c,children:(0,a.jsx)("div",{className:(0,n.cn)("h-full w-full flex-1 bg-primary transition-all",i),style:{transform:"translateX(-".concat(100-d,"%)")}})})});x.displayName="Progress";var m=s(6467),h=s(183),g=s(316),p=s(8680);function u(e){var t;let{campaign:s}=e,l=Math.min(Math.round(s.current_amount_dt/s.goal_amount_dt*100),100),r=(()=>{if(!s.end_at)return null;let e=(0,m.H)(s.end_at);if((0,h.R)(e))return"종료됨";let t=(0,g.c)(e,new Date);if(t>0)return"".concat(t,"일 남음");let a=(0,p.M)(e,new Date);return a>0?"".concat(a,"시간 남음"):"곧 종료"})();return(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x,{value:l,className:"h-3"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-pink-600 font-bold text-xl",children:[l,"%"]}),l>=100&&(0,a.jsx)("span",{className:"text-green-600 font-medium",children:"목표 달성! \uD83C\uDF89"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-2",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(t=s.current_amount_dt)>=1e4?"".concat((t/1e4).toFixed(0),"만"):t.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"모인 금액 (DT)"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.backer_count.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"서포터"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r||"-"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"completed"===s.status?"펀딩 종료":"남은 시간"})]})]}),(0,a.jsx)("div",{className:"pt-2 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"목표 금액"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[s.goal_amount_dt.toLocaleString()," DT"]})]})})]})}var j=s(5239),f=s(4679),b=s(5229),N=s(368),y=s(7937),v=s(7003);function w(e){let{galleryImages:t,coverImage:s,title:r}=e,[n,i]=(0,l.useState)(0),[c,d]=(0,l.useState)(!1),o=t||[],x=[...s&&!o.some(e=>e.url===s)?[{url:s,caption:r||"메인 이미지",display_order:-1}]:[],...o.sort((e,t)=>e.display_order-t.display_order)];if(0===x.length)return null;let m=x[n];return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative aspect-[4/3] w-full rounded-xl overflow-hidden bg-gray-100 cursor-pointer group",onClick:()=>d(!0),children:[(0,a.jsx)(j.default,{src:m.url,alt:m.caption||"캠페인 이미지",fill:!0,className:"object-cover transition-transform group-hover:scale-105",priority:!0}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity text-sm font-medium",children:"클릭하여 확대"})}),x.length>1&&(0,a.jsxs)("div",{className:"absolute bottom-3 right-3 bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[n+1," / ",x.length]})]}),x.length>1&&(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:x.map((e,t)=>(0,a.jsx)("button",{onClick:()=>i(t),className:"relative flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all ".concat(n===t?"border-pink-500 ring-2 ring-pink-200":"border-transparent hover:border-gray-300"),children:(0,a.jsx)(j.default,{src:e.url,alt:e.caption||"이미지 ".concat(t+1),fill:!0,className:"object-cover"})},t))}),(0,a.jsx)(f.lG,{open:c,onOpenChange:d,children:(0,a.jsx)(f.Cf,{className:"max-w-[90vw] max-h-[90vh] p-0 bg-black border-none",children:(0,a.jsxs)("div",{className:"relative w-full h-[80vh]",children:[(0,a.jsx)(v.Button,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 text-white hover:bg-white/20 p-2",onClick:()=>d(!1),children:(0,a.jsx)(b.A,{className:"h-6 w-6"})}),x.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Button,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 h-12 w-12 p-2",onClick:()=>{i(e=>e>0?e-1:x.length-1)},children:(0,a.jsx)(N.A,{className:"h-8 w-8"})}),(0,a.jsx)(v.Button,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white hover:bg-white/20 h-12 w-12 p-2",onClick:()=>{i(e=>e<x.length-1?e+1:0)},children:(0,a.jsx)(y.A,{className:"h-8 w-8"})})]}),(0,a.jsx)("div",{className:"relative w-full h-full",children:(0,a.jsx)(j.default,{src:m.url,alt:m.caption||"캠페인 이미지",fill:!0,className:"object-contain"})}),m.caption&&(0,a.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/60 text-white px-4 py-2 rounded-full text-sm",children:m.caption})]})})})]})}function _(e){let{tabs:t,activeTab:s,onTabChange:l}=e;return t&&0!==t.length?(0,a.jsx)("div",{className:"border-b border-gray-200 sticky top-14 bg-white z-10",children:(0,a.jsx)("nav",{className:"flex overflow-x-auto scrollbar-hide -mb-px",children:t.map(e=>{let t=s===e.id;return(0,a.jsx)("button",{onClick:()=>l(e.id),className:(0,n.cn)("flex-shrink-0 px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap",t?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[e.label,void 0!==e.count&&e.count>0&&(0,a.jsx)("span",{className:(0,n.cn)("text-xs px-1.5 py-0.5 rounded-full",t?"bg-pink-100 text-pink-600":"bg-gray-100 text-gray-500"),children:e.count})]})},e.id)})})}):null}var k=s(5917),A=s(512),C=s(709),D=s(6983),S=s(5998),E=s(3457),T=s(7181),L=s(1169);function q(e){let{campaign:t,tiers:s,selectedTier:i,onSelectTier:c,onPledge:d,className:o}=e,[x,m]=(0,l.useState)(!1),[h,g]=(0,l.useState)(t.backer_count),p="active"===t.status,u="completed"===t.status,j=t.end_at?new Date(t.end_at):null,f=!!j&&new Date>j,b=t.goal_amount_dt>0?Math.min(t.current_amount_dt/t.goal_amount_dt*100,100):0,N=async()=>{if(navigator.share)try{await navigator.share({title:t.title,text:t.subtitle||t.title,url:window.location.href})}catch(e){}else navigator.clipboard.writeText(window.location.href),alert("링크가 복사되었습니다!")};return(0,a.jsxs)("div",{className:(0,n.cn)("space-y-4",o),children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-pink-50 to-orange-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"text-2xl font-bold text-pink-600",children:[Math.round(b),"%"]}),b>=100&&(0,a.jsx)(r.E,{className:"bg-green-500 text-white",children:"목표 달성!"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-pink-500 to-orange-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(b,100),"%")}})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"모인 금액"}),(0,a.jsxs)("p",{className:"font-bold text-gray-900",children:[t.current_amount_dt.toLocaleString()," DT"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"참여자"}),(0,a.jsxs)("p",{className:"font-bold text-gray-900",children:[t.backer_count.toLocaleString(),"명"]})]})]})]}),i&&(0,a.jsx)("div",{className:"p-4 border-t border-gray-100 bg-pink-50/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:i.title})]}),(0,a.jsxs)("span",{className:"font-bold text-pink-600",children:[i.price_dt.toLocaleString()," DT"]})]})}),(0,a.jsx)("div",{className:"p-4 space-y-3",children:p&&!f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.Button,{onClick:d,disabled:!i,className:"w-full h-12 bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white font-bold text-base rounded-xl",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 mr-2"}),i?"후원하기":"리워드를 선택해주세요"]}),(0,a.jsxs)(v.Button,{variant:"outline",className:"w-full h-10 border-pink-200 text-pink-600 hover:bg-pink-50 rounded-xl",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"선물하기"]})]}):u||f?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(r.E,{variant:"secondary",className:"text-base px-4 py-2",children:u?"펀딩 성공!":"펀딩 종료"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:u?"성공적으로 목표 금액을 달성했습니다.":"이 캠페인은 종료되었습니다."})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsxs)(r.E,{variant:"outline",className:"text-base px-4 py-2",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"오픈 예정"]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:t.start_at?"".concat(new Date(t.start_at).toLocaleDateString("ko-KR")," 오픈"):"오픈 일정 확인 중"}),(0,a.jsxs)(v.Button,{variant:"outline",className:"w-full mt-3 h-10 border-pink-200 text-pink-600 hover:bg-pink-50 rounded-xl",children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"오픈 알림 받기"]})]})}),(0,a.jsxs)("div",{className:"px-4 pb-4 flex gap-2",children:[(0,a.jsxs)(v.Button,{variant:"outline",onClick:()=>{m(!x),g(e=>x?e-1:e+1)},className:(0,n.cn)("flex-1 h-10 rounded-xl",x&&"border-pink-300 bg-pink-50 text-pink-600"),children:[(0,a.jsx)(E.A,{className:(0,n.cn)("h-4 w-4 mr-2",x&&"fill-pink-500 text-pink-500")}),h.toLocaleString()]}),(0,a.jsxs)(v.Button,{variant:"outline",onClick:N,className:"flex-1 h-10 rounded-xl",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"공유하기"]})]})]}),s&&s.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-4",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(C.A,{className:"h-5 w-5 text-pink-500"}),"리워드 선택"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.slice(0,5).map(e=>(0,a.jsxs)("div",{onClick:()=>c(e),className:(0,n.cn)("p-3 rounded-xl border cursor-pointer transition-all",(null==i?void 0:i.id)===e.id?"border-pink-500 bg-pink-50/50 ring-2 ring-pink-200":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("span",{className:"font-bold text-gray-900",children:[e.price_dt.toLocaleString()," DT"]}),e.badge_type&&(0,a.jsx)(r.E,{variant:"secondary",className:"text-xs",children:e.badge_label||e.badge_type})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-1",children:e.title}),null!==e.total_quantity&&(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:0===e.remaining_quantity?(0,a.jsx)("span",{className:"text-red-500",children:"마감"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-pink-600 font-medium",children:[e.remaining_quantity,"개"]})," ","남음"]})})]},e.id))}),s.length>5&&(0,a.jsxs)(v.Button,{variant:"ghost",className:"w-full mt-3 text-gray-500",children:["전체 ",s.length,"개 리워드 보기"]})]}),t.creator&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-4",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5 text-pink-500"}),"크리에이터"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t.creator.avatar_url?(0,a.jsx)("img",{src:t.creator.avatar_url,alt:t.creator.display_name||"크리에이터",className:"w-12 h-12 rounded-full object-cover"}):(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-orange-400 flex items-center justify-center text-white font-bold",children:(t.creator.display_name||"C").charAt(0)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:t.creator.display_name||"크리에이터"}),t.creator.bio&&(0,a.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.creator.bio})]})]})]})]})}var z=s(6485);function R(e){var t;let{schedule:s,className:l=""}=e;return s.sale_period||s.winner_announce||s.fansign_date||s.videocall_date||s.shipping_date||s.custom_events&&s.custom_events.length>0?(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 ".concat(l),children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 text-pink-500"}),"이벤트 안내"]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[s.sale_period&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDED2"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"판매기간"}),(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:[s.sale_period.start," ~ ",s.sale_period.end]})]})]}),s.winner_announce&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83C\uDF89"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"당첨자 발표"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:s.winner_announce})]})]}),s.fansign_date&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83C\uDFA4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"FANSIGN"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:s.fansign_date})]})]}),s.videocall_date&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCF1"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"VIDEOCALL"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:s.videocall_date})]})]}),s.shipping_date&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE6"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"배송 예정"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:s.shipping_date})]})]}),null==(t=s.custom_events)?void 0:t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-5 h-5 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCCC"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"text-gray-500",children:e.label}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.date}),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]})]},t))]})]}):null}var B=s(2108),M=s(4033);function P(e){let{benefits:t,className:s=""}=e,[n,i]=(0,l.useState)(0);if(0===t.length)return null;let c={all:{label:"전원",color:"bg-blue-100 text-blue-700"},winner:{label:"당첨자",color:"bg-yellow-100 text-yellow-700"},fansign:{label:"팬사인회",color:"bg-pink-100 text-pink-700"},videocall:{label:"영상통화",color:"bg-purple-100 text-purple-700"}};return(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden ".concat(s),children:[(0,a.jsx)("div",{className:"px-4 py-3 bg-gradient-to-r from-pink-50 to-purple-50 border-b border-gray-100",children:(0,a.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 text-pink-500"}),"특전 안내"]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:t.map((e,t)=>{let s=n===t,l=c[e.for_type]||c.all;return(0,a.jsxs)("div",{className:"overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>i(s?null:t),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(r.E,{className:"".concat(l.color," text-xs font-medium"),children:l.label}),(0,a.jsx)("span",{className:"font-medium text-gray-900 text-left",children:e.title})]}),s?(0,a.jsx)(B.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(M.A,{className:"h-4 w-4 text-gray-400"})]}),s&&(0,a.jsxs)("div",{className:"px-4 pb-4 space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-line pl-2 border-l-2 border-pink-200",children:e.description}),e.images&&e.images.length>0&&(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:e.images.map((t,s)=>(0,a.jsx)("div",{className:"relative flex-shrink-0 w-24 h-24 rounded-lg overflow-hidden",children:(0,a.jsx)(j.default,{src:t,alt:"".concat(e.title," 이미지 ").concat(s+1),fill:!0,className:"object-cover"})},s))})]})]},t)})})]})}let F=["p","div","br","hr","h1","h2","h3","h4","h5","h6","blockquote","pre","code","ul","ol","li","strong","b","em","i","u","s","del","ins","a","span","sub","sup","mark","img","figure","figcaption","table","thead","tbody","tr","th","td"],O=["href","target","rel","src","alt","title","width","height","class","style","colspan","rowspan"],I=null;function U(e){if(!e)return"";let t=function(){if(!1===I)return null;if(I)return I;try{let e=s(6980);return I=e.default||e}catch(e){return I=!1,null}}();return t?t.sanitize(e,{ALLOWED_TAGS:F,ALLOWED_ATTR:O,ALLOW_DATA_ATTR:!1,ADD_ATTR:["target"],ALLOWED_URI_REGEXP:/^(?:(?:https?|mailto|tel):|[^a-z]|[a-z+.-]+(?:[^a-z+.\-:]|$))/i}):e.replace(/<(script|style|iframe|object|embed|form)\b[^]*?<\/\1>/gi,"").replace(/<(script|iframe|object|embed|form)\b[^>]*\/?>/gi,"").replace(/\s+on\w+\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+)/gi,"").replace(/(href|src)\s*=\s*(?:"javascript:[^"]*"|'javascript:[^']*')/gi,"")}var K=s(9715),H=s(5882);function G(e){var t,s,r,i,c;let{campaign:d}=e,[o,x]=(0,l.useState)("intro"),m=[{id:"intro",label:"소개",icon:K.A,disabled:!1},{id:"budget",label:"예산",icon:H.A,disabled:!(null==(s=d.budget_info)||null==(t=s.items)?void 0:t.length)},{id:"schedule",label:"일정",icon:z.A,disabled:!(null==(r=d.schedule_info)?void 0:r.length)},{id:"team",label:"팀 소개",icon:L.A,disabled:!(null==(c=d.team_info)||null==(i=c.members)?void 0:i.length)}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4",children:m.map(e=>(0,a.jsxs)("button",{onClick:()=>!e.disabled&&x(e.id),disabled:e.disabled,className:(0,n.cn)("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all",o===e.id?"bg-pink-500 text-white":e.disabled?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),e.label]},e.id))}),(0,a.jsxs)("div",{className:"min-h-[400px]",children:["intro"===o&&(0,a.jsx)(V,{campaign:d}),"budget"===o&&(0,a.jsx)(W,{campaign:d}),"schedule"===o&&(0,a.jsx)(X,{campaign:d}),"team"===o&&(0,a.jsx)(Q,{campaign:d})]})]})}function V(e){let{campaign:t}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[t.description_html?(0,a.jsx)("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-headings:text-gray-900 prose-p:text-gray-700 prose-a:text-pink-600",dangerouslySetInnerHTML:{__html:U(t.description_html)}}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"캠페인 소개가 준비 중입니다."}),t.stretch_goals&&t.stretch_goals.length>0&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 mt-8",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:"\uD83C\uDFAF 스트레치 골"}),(0,a.jsx)("div",{className:"space-y-4",children:t.stretch_goals.map((e,s)=>{let l=t.current_amount_dt/e.amount_dt*100,r=t.current_amount_dt>=e.amount_dt||e.is_reached;return(0,a.jsxs)("div",{className:(0,n.cn)("bg-white rounded-xl p-4 border",r?"border-green-300":"border-gray-200"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsxs)("span",{className:(0,n.cn)("text-sm font-bold",r?"text-green-600":"text-gray-500"),children:[e.amount_dt.toLocaleString()," DT",r&&" ✓"]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:(0,n.cn)("h-2 rounded-full transition-all",r?"bg-green-500":"bg-gradient-to-r from-purple-400 to-pink-400"),style:{width:"".concat(Math.min(l,100),"%")}})})]},s)})})]}),t.notices&&t.notices.length>0&&(0,a.jsxs)("div",{className:"bg-yellow-50 rounded-2xl p-6 mt-8",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:"⚠️ 유의사항"}),(0,a.jsx)("div",{className:"space-y-4",children:t.notices.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:U(e.content_html)}})]},t))})]})]})}function W(e){var t;let{campaign:s}=e,l=s.budget_info;return(null==l||null==(t=l.items)?void 0:t.length)?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"예산 구성"}),(0,a.jsx)("div",{className:"flex gap-1 h-8 rounded-lg overflow-hidden mb-6",children:l.items.map((e,t)=>{let s=["bg-pink-500","bg-purple-500","bg-blue-500","bg-green-500","bg-orange-500","bg-cyan-500"];return(0,a.jsx)("div",{className:(0,n.cn)(s[t%s.length],"transition-all"),style:{width:"".concat(e.percentage,"%")},title:"".concat(e.name,": ").concat(e.percentage,"%")},t)})}),(0,a.jsx)("div",{className:"space-y-3",children:l.items.map((e,t)=>{let s=["bg-pink-500","bg-purple-500","bg-blue-500","bg-green-500","bg-orange-500","bg-cyan-500"];return(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,n.cn)("w-3 h-3 rounded-full",s[t%s.length])}),(0,a.jsx)("span",{className:"text-gray-700",children:e.name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[e.amount.toLocaleString()," ",l.currency||"DT"]}),(0,a.jsxs)("span",{className:"text-gray-500 text-sm ml-2",children:["(",e.percentage,"%)"]})]})]},t)})}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t-2 border-gray-300 flex justify-between",children:[(0,a.jsx)("span",{className:"font-bold text-gray-900",children:"합계"}),(0,a.jsxs)("span",{className:"font-bold text-pink-600",children:[l.total.toLocaleString()," ",l.currency||"DT"]})]})]})}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"예산 정보가 없습니다."})}function X(e){let{campaign:t}=e,s=t.schedule_info;return(null==s?void 0:s.length)?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-6",children:"프로젝트 일정"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-2 bottom-2 w-0.5 bg-gray-300"}),(0,a.jsx)("div",{className:"space-y-6",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:(0,n.cn)("relative z-10 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",e.is_completed?"bg-green-500 text-white":"bg-white border-2 border-gray-300"),children:e.is_completed?(0,a.jsx)("span",{className:"text-sm",children:"✓"}):(0,a.jsx)("span",{className:"text-xs text-gray-500",children:t+1})}),(0,a.jsxs)("div",{className:"flex-1 pb-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,a.jsx)("span",{className:"text-sm text-pink-600 font-medium",children:new Date(e.date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.milestone}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]},t))})]})]})}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"일정 정보가 없습니다."})}function Q(e){var t;let{campaign:s}=e,l=s.team_info;return(null==l||null==(t=l.members)?void 0:t.length)?(0,a.jsxs)("div",{className:"space-y-6",children:[l.company_name&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-2",children:l.company_name}),l.company_description&&(0,a.jsx)("p",{className:"text-gray-600",children:l.company_description})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.members.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-4 flex gap-4",children:[e.avatar_url?(0,a.jsx)("img",{src:e.avatar_url,alt:e.name,className:"w-16 h-16 rounded-full object-cover flex-shrink-0"}):(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-400 to-purple-400 flex items-center justify-center text-white font-bold text-xl flex-shrink-0",children:e.name.charAt(0)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-bold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-pink-600 mb-1",children:e.role}),e.bio&&(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.bio}),e.links&&e.links.length>0&&(0,a.jsx)("div",{className:"flex gap-2 mt-2",children:e.links.map((e,t)=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-500 hover:text-pink-500 flex items-center gap-1",children:[e.type,(0,a.jsx)(y.A,{className:"h-3 w-3"})]},t))})]})]},t))})]}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"팀 정보가 없습니다."})}var $=s(6617),Y=s(6132),J=s(6398),Z=s(5299),ee=s(4266),et=s(8525);function es(e){let{tier:t,onSelect:s,isSelected:i,disabled:c}=e,d=null!==t.total_quantity&&0===t.remaining_quantity,o=null!==t.total_quantity&&null!==t.remaining_quantity,x=!d&&!c&&s,[m,h]=(0,l.useState)(!1),[g,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{d&&(async()=>{let e=(0,et.createClient)(),{data:{user:s}}=await e.auth.getUser();if(!s)return;let{data:a}=await e.from("funding_tier_waitlist").select("id").eq("tier_id",t.id).eq("user_id",s.id).eq("is_active",!0).maybeSingle();h(!!a)})()},[d,t.id]);let u=(0,l.useCallback)(async e=>{e.stopPropagation(),p(!0);try{let e=(0,et.createClient)(),{data:{user:s}}=await e.auth.getUser();if(!s)return void alert("로그인이 필요합니다.");m?(await e.from("funding_tier_waitlist").update({is_active:!1}).eq("tier_id",t.id).eq("user_id",s.id).eq("is_active",!0),h(!1)):(await e.from("funding_tier_waitlist").insert({tier_id:t.id,campaign_id:t.campaign_id,user_id:s.id}),h(!0))}catch(e){alert("처리 중 오류가 발생했습니다. 다시 시도해주세요.")}finally{p(!1)}},[m,t.id,t.campaign_id]),f=t.badge_type&&({recommended:{label:t.badge_label||"추천",className:"bg-pink-500 text-white"},limited:{label:t.badge_label||"한정",className:"bg-orange-500 text-white"},early_bird:{label:t.badge_label||"얼리버드",className:"bg-blue-500 text-white"},best:{label:t.badge_label||"BEST",className:"bg-purple-500 text-white"},new:{label:t.badge_label||"NEW",className:"bg-green-500 text-white"}})[t.badge_type]||null;return(0,a.jsxs)("div",{className:(0,n.cn)("relative border rounded-xl overflow-hidden transition-all",i?"border-pink-500 ring-2 ring-pink-200 bg-pink-50/50":"border-gray-200 bg-white hover:border-gray-300",d&&"opacity-60",x&&"cursor-pointer"),onClick:()=>x&&s(t),children:[f&&(0,a.jsx)("div",{className:"absolute top-0 left-0 z-10",children:(0,a.jsx)(r.E,{className:(0,n.cn)("rounded-none rounded-br-lg",f.className),children:f.label})}),d&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white/60 z-5 flex items-center justify-center",children:(0,a.jsx)(r.E,{variant:"secondary",className:"bg-gray-800 text-white text-sm px-4 py-1",children:"마감"})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,a.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:[t.price_dt.toLocaleString(),(0,a.jsx)("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"DT"})]}),i&&(0,a.jsx)("div",{className:"h-6 w-6 rounded-full bg-pink-500 flex items-center justify-center",children:(0,a.jsx)(k.A,{className:"h-4 w-4 text-white"})})]}),(0,a.jsx)("h4",{className:"font-bold text-gray-900",children:t.title}),t.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.description}),t.included_items&&t.included_items.length>0&&(0,a.jsxs)("div",{className:"space-y-1.5 pt-2 border-t border-gray-100",children:[(0,a.jsxs)("p",{className:"text-xs font-medium text-gray-500 flex items-center gap-1",children:[(0,a.jsx)($.A,{className:"h-3 w-3"}),"포함 구성"]}),(0,a.jsx)("ul",{className:"space-y-1",children:t.included_items.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("span",{children:[e.name,e.quantity>1&&(0,a.jsxs)("span",{className:"text-gray-500",children:[" x",e.quantity]}),e.description&&(0,a.jsx)("span",{className:"text-gray-400 text-xs block",children:e.description})]})]},t))})]}),t.has_member_selection&&t.member_options&&t.member_options.length>0&&(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-100",children:[(0,a.jsxs)("p",{className:"text-xs font-medium text-gray-500 flex items-center gap-1 mb-2",children:[(0,a.jsx)(L.A,{className:"h-3 w-3"}),"멤버 선택 가능"]}),(0,a.jsx)("div",{className:"flex gap-1 flex-wrap",children:t.member_options.slice(0,6).map(e=>(0,a.jsx)("div",{className:"relative w-8 h-8 rounded-full overflow-hidden bg-gray-100",title:e.member_name,children:e.avatar_url?(0,a.jsx)(j.default,{src:e.avatar_url,alt:e.member_name,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-500",children:e.member_name.charAt(0)})},e.member_id))})]}),(0,a.jsxs)("div",{className:"pt-2 flex items-center justify-between text-sm",children:[o?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,a.jsx)(Y.A,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:d?"마감":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-pink-600 font-medium",children:[t.remaining_quantity,"개"]})," ","남음"]})})]}):(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"수량 제한 없음"}),(0,a.jsxs)("div",{className:"text-gray-400 text-xs flex items-center gap-1",children:[(0,a.jsx)(L.A,{className:"h-3 w-3"}),t.pledge_count,"명 참여"]})]}),t.shipping_info&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1 pt-1",children:[(0,a.jsx)(J.A,{className:"h-3 w-3"}),t.shipping_info]}),d&&(0,a.jsxs)(v.Button,{variant:m?"secondary":"outline",size:"sm",className:(0,n.cn)("w-full mt-2",m&&"bg-pink-500 hover:bg-pink-600 text-white"),disabled:g,onClick:u,children:[g?(0,a.jsx)(Z.A,{className:"h-4 w-4 mr-2 animate-spin"}):m?(0,a.jsx)(ee.A,{className:"h-4 w-4 mr-2"}):(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),m?"알림 취소":"빈자리 알림 받기"]})]})]})}function ea(e){let{tiers:t,selectedTier:s,onSelectTier:l}=e,r=[...t].sort((e,t)=>e.display_order-t.display_order),n=r.filter(e=>null===e.total_quantity||null!==e.remaining_quantity&&e.remaining_quantity>0),i=r.filter(e=>null!==e.total_quantity&&0===e.remaining_quantity);return 0===t.length?(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"리워드 정보가 없습니다."}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-pink-50 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-gray-700",children:["총 ",(0,a.jsxs)("span",{className:"font-bold text-pink-600",children:[t.length,"개"]})," 리워드"]}),(0,a.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,a.jsxs)("span",{className:"text-green-600",children:["구매가능 ",n.length,"개"]}),i.length>0&&(0,a.jsxs)("span",{className:"text-gray-400",children:["마감 ",i.length,"개"]})]})]})}),n.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:"\uD83C\uDF81 선택 가능한 리워드"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:n.map(e=>(0,a.jsx)(es,{tier:e,isSelected:(null==s?void 0:s.id)===e.id,onSelect:l},e.id))})]}),i.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-500 flex items-center gap-2",children:"마감된 리워드"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 opacity-60",children:i.map(e=>(0,a.jsx)(es,{tier:e,isSelected:!1,disabled:!0},e.id))})]}),t.some(e=>e.has_member_selection)&&(0,a.jsx)("div",{className:"bg-blue-50 rounded-xl p-4 text-sm",children:(0,a.jsxs)("p",{className:"text-blue-700",children:[(0,a.jsx)("span",{className:"font-medium",children:"\uD83D\uDCA1 멤버 선택 안내:"})," 일부 리워드는 특정 멤버를 선택할 수 있습니다. 리워드 선택 후 결제 단계에서 원하는 멤버를 선택해주세요."]})})]})}var el=s(9708),er=s(7828);function en(e){let{updates:t,isBackerOnly:s=!1}=e;if(0===t.length)return(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(S.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"아직 새소식이 없습니다."}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"새로운 소식이 올라오면 알려드릴게요!"})]});let l=[...t].sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return(0,a.jsx)("div",{className:"space-y-4",children:l.map((e,t)=>{let l=(e=>{let t={general:{label:"일반",className:"bg-gray-100 text-gray-700"},milestone:{label:"마일스톤",className:"bg-purple-100 text-purple-700"},shipping:{label:"배송",className:"bg-blue-100 text-blue-700"},schedule_change:{label:"일정변경",className:"bg-orange-100 text-orange-700"},goal_reached:{label:"목표달성",className:"bg-green-100 text-green-700"}};return(e?t[e]:void 0)||t.general})(e.update_type),i=e.visibility?"public"!==e.visibility&&!s:!e.is_public&&!s;return(0,a.jsxs)("article",{className:(0,n.cn)("bg-white border border-gray-200 rounded-xl overflow-hidden",i&&"opacity-75"),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(r.E,{className:(0,n.cn)("text-xs",l.className),children:l.label}),"backers_only"===e.visibility&&(0,a.jsxs)(r.E,{variant:"outline",className:"text-xs border-pink-300 text-pink-600",children:[(0,a.jsx)(el.A,{className:"h-3 w-3 mr-1"}),"후원자 전용"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,a.jsx)(z.A,{className:"h-3 w-3"}),new Date(e.created_at).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})]})]}),(0,a.jsx)("h3",{className:"font-bold text-gray-900",children:e.title})]}),i?(0,a.jsxs)("div",{className:"p-6 text-center bg-gray-50",children:[(0,a.jsx)(el.A,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"후원자만 볼 수 있는 콘텐츠입니다."})]}):(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-headings:text-gray-900 prose-p:text-gray-700",dangerouslySetInnerHTML:{__html:U(e.content_html||e.content_md||"")}})}),(0,a.jsxs)("div",{className:"px-4 py-2 bg-gray-50 flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(er.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.view_count.toLocaleString()," 조회"]})]}),0===t&&(0,a.jsx)(r.E,{variant:"secondary",className:"text-xs",children:"최신"})]})]},e.id)})})}var ei=s(21),ec=s(6651);function ed(e){let{faqs:t}=e,[s,r]=(0,l.useState)(new Set),[i,c]=(0,l.useState)("");if(0===t.length)return(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(ei.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"자주 묻는 질문이 없습니다."})]});let d=i?t.filter(e=>e.question.toLowerCase().includes(i.toLowerCase())||e.answer.toLowerCase().includes(i.toLowerCase())):t;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(ec.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"질문 검색...",value:i,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pink-200 focus:border-pink-300"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{r(new Set(t.map(e=>e.id)))},className:"px-3 py-2 text-sm text-gray-600 hover:text-pink-600 hover:bg-pink-50 rounded-lg transition-colors",children:"모두 펼치기"}),(0,a.jsx)("button",{onClick:()=>{r(new Set)},className:"px-3 py-2 text-sm text-gray-600 hover:text-pink-600 hover:bg-pink-50 rounded-lg transition-colors",children:"모두 접기"})]})]}),0===d.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"검색 결과가 없습니다."}):(0,a.jsx)("div",{className:"divide-y divide-gray-200 border border-gray-200 rounded-xl overflow-hidden",children:d.map((e,t)=>{let l=s.has(e.id);return(0,a.jsxs)("div",{className:"bg-white",children:[(0,a.jsxs)("button",{onClick:()=>{var t;return t=e.id,void r(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},className:"w-full flex items-start gap-3 p-4 text-left hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-pink-100 text-pink-600 rounded-full flex items-center justify-center text-sm font-medium",children:"Q"}),(0,a.jsx)("span",{className:"flex-1 font-medium text-gray-900 pr-8",children:e.question}),(0,a.jsx)(M.A,{className:(0,n.cn)("h-5 w-5 text-gray-400 transition-transform flex-shrink-0",l&&"rotate-180")})]}),(0,a.jsx)("div",{className:(0,n.cn)("overflow-hidden transition-all duration-200",l?"max-h-96":"max-h-0"),children:(0,a.jsx)("div",{className:"px-4 pb-4 pt-0",children:(0,a.jsxs)("div",{className:"flex gap-3 pl-9",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-gray-100 text-gray-600 rounded-full flex items-center justify-center text-sm font-medium",children:"A"}),(0,a.jsx)("div",{className:"flex-1 text-gray-700 text-sm leading-relaxed whitespace-pre-wrap",children:e.answer})]})})})]},e.id)})}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"원하는 답변을 찾지 못하셨나요?"}),(0,a.jsx)("button",{className:"text-sm font-medium text-pink-600 hover:text-pink-700",children:"크리에이터에게 문의하기 →"})]})]})}var eo=s(5937),ex=s(8085),em=s(9058),eh=s(7772),eg=s(4861);function ep(e){let{comments:t,onAddComment:s,currentUserId:r}=e,[i,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(null),[x,m]=(0,l.useState)(""),[h,g]=(0,l.useState)("latest"),[p,u]=(0,l.useState)(new Set),j=t.filter(e=>!e.parent_id),f=new Map;t.filter(e=>e.parent_id).forEach(e=>{let t=f.get(e.parent_id)||[];f.set(e.parent_id,[...t,e])});let b=[...j].sort((e,t)=>e.is_pinned&&!t.is_pinned?-1:!e.is_pinned&&t.is_pinned?1:"popular"===h?t.like_count-e.like_count:new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),N=e=>{x.trim()&&s&&(s(x.trim(),e),m(""),o(null))};return 0!==t.length||s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-400 to-purple-400 flex items-center justify-center text-white font-medium flex-shrink-0",children:"U"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("textarea",{value:i,onChange:e=>c(e.target.value),placeholder:"응원의 메시지를 남겨주세요!",className:"w-full border border-gray-200 rounded-lg p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-pink-200 focus:border-pink-300",rows:3}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsxs)(v.Button,{onClick:()=>{i.trim()&&s&&(s(i.trim()),c(""))},disabled:!i.trim(),size:"sm",className:"bg-pink-500 hover:bg-pink-600",children:[(0,a.jsx)(ex.A,{className:"h-4 w-4 mr-1"}),"댓글 작성"]})})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["댓글 ",(0,a.jsx)("span",{className:"font-medium text-gray-900",children:t.length}),"개"]}),(0,a.jsxs)("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>g("latest"),className:(0,n.cn)("px-3 py-1 text-sm rounded-md transition-colors","latest"===h?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"최신순"}),(0,a.jsx)("button",{onClick:()=>g("popular"),className:(0,n.cn)("px-3 py-1 text-sm rounded-md transition-colors","popular"===h?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"인기순"})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:b.map(e=>{let t=f.get(e.id)||[],s=p.has(e.id),l=d===e.id;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eu,{comment:e,onReply:()=>o(e.id),isOwn:e.user_id===r}),t.length>0&&(0,a.jsxs)("div",{className:"ml-12",children:[(0,a.jsxs)("button",{onClick:()=>{var t;return t=e.id,void u(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},className:"flex items-center gap-1 text-sm text-pink-600 hover:text-pink-700 mb-2",children:[s?(0,a.jsx)(B.A,{className:"h-4 w-4"}):(0,a.jsx)(M.A,{className:"h-4 w-4"}),"답글 ",t.length,"개"]}),s&&(0,a.jsx)("div",{className:"space-y-2 border-l-2 border-gray-100 pl-4",children:t.map(e=>(0,a.jsx)(eu,{comment:e,isReply:!0,isOwn:e.user_id===r},e.id))})]}),l&&(0,a.jsx)("div",{className:"ml-12 mt-2",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"답글을 입력하세요...",className:"flex-1 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-pink-200",onKeyPress:t=>{"Enter"!==t.key||t.shiftKey||N(e.id)}}),(0,a.jsx)(v.Button,{size:"sm",onClick:()=>N(e.id),disabled:!x.trim(),className:"bg-pink-500 hover:bg-pink-600",children:"등록"}),(0,a.jsx)(v.Button,{size:"sm",variant:"ghost",onClick:()=>{o(null),m("")},children:"취소"})]})})]},e.id)})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(eo.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"아직 댓글이 없습니다."}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"첫 번째 댓글을 남겨보세요!"})]})}function eu(e){var t,s,i;let{comment:c,onReply:d,isReply:o,isOwn:x}=e,[m,h]=(0,l.useState)(!1),[g,p]=(0,l.useState)(c.like_count);return(0,a.jsxs)("div",{className:(0,n.cn)("bg-white rounded-xl p-4",!o&&"border border-gray-200",c.is_pinned&&"ring-2 ring-pink-200 border-pink-200"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(null==(t=c.user)?void 0:t.avatar_url)?(0,a.jsx)("img",{src:c.user.avatar_url,alt:"",className:(0,n.cn)("rounded-full object-cover",o?"w-7 h-7":"w-9 h-9")}):(0,a.jsx)("div",{className:(0,n.cn)("rounded-full bg-gradient-to-br from-pink-400 to-purple-400 flex items-center justify-center text-white font-medium",o?"w-7 h-7 text-xs":"w-9 h-9 text-sm"),children:((null==(s=c.user)?void 0:s.display_name)||"U").charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:(0,n.cn)("font-medium text-gray-900",o&&"text-sm"),children:(null==(i=c.user)?void 0:i.display_name)||"익명"}),c.is_creator_reply&&(0,a.jsx)(r.E,{className:"bg-pink-500 text-white text-xs",children:"크리에이터"}),c.is_pinned&&(0,a.jsxs)(r.E,{variant:"outline",className:"text-xs border-pink-300 text-pink-600",children:[(0,a.jsx)(em.A,{className:"h-3 w-3 mr-1"}),"고정"]})]}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:function(e){let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?"방금 전":s<3600?"".concat(Math.floor(s/60),"분 전"):s<86400?"".concat(Math.floor(s/3600),"시간 전"):s<604800?"".concat(Math.floor(s/86400),"일 전"):t.toLocaleDateString("ko-KR",{month:"long",day:"numeric"})}(c.created_at)})]})]}),(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,a.jsx)(eh.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("p",{className:(0,n.cn)("text-gray-700 whitespace-pre-wrap",o?"text-sm":"text-base"),children:c.content}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,a.jsxs)("button",{onClick:()=>{h(!m),p(e=>m?e-1:e+1)},className:(0,n.cn)("flex items-center gap-1 text-sm transition-colors",m?"text-pink-500":"text-gray-400 hover:text-pink-500"),children:[(0,a.jsx)(E.A,{className:(0,n.cn)("h-4 w-4",m&&"fill-pink-500")}),(0,a.jsx)("span",{children:g>0&&g})]}),!o&&d&&(0,a.jsxs)("button",{onClick:d,className:"flex items-center gap-1 text-sm text-gray-400 hover:text-gray-600 transition-colors",children:[(0,a.jsx)(eg.A,{className:"h-4 w-4"}),"답글"]})]})]})}var ej=s(9347),ef=s(2196),eb=s(2529),eN=s(5276);function ey(e){let{reviews:t,onAddReview:s}=e,[r,i]=(0,l.useState)("latest"),[c,d]=(0,l.useState)(null),[o,x]=(0,l.useState)(!1),m=t.length,h=m>0?t.reduce((e,t)=>e+(t.rating||0),0)/m:0,g=[5,4,3,2,1].map(e=>({rating:e,count:t.filter(t=>t.rating===e).length})),p=[...t];return(c&&(p=p.filter(e=>e.rating===c)),o&&(p=p.filter(e=>e.images&&e.images.length>0)),p.sort((e,t)=>"helpful"===r?t.helpful_count-e.helpful_count:"rating"===r?(t.rating||0)-(e.rating||0):new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),0===t.length)?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(ej.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"아직 후기가 없습니다."}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"펀딩에 참여하신 후 후기를 남겨주세요!"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-pink-50 to-orange-50 rounded-2xl p-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"text-center md:border-r md:border-gray-200 md:pr-6",children:[(0,a.jsx)("div",{className:"text-5xl font-bold text-gray-900 mb-1",children:h.toFixed(1)}),(0,a.jsx)("div",{className:"flex items-center justify-center gap-0.5 mb-2",children:[1,2,3,4,5].map(e=>(0,a.jsx)(ej.A,{className:(0,n.cn)("h-5 w-5",e<=Math.round(h)?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},e))}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[m,"개의 후기"]})]}),(0,a.jsx)("div",{className:"flex-1 space-y-2",children:g.map(e=>{let{rating:t,count:s}=e,l=m>0?s/m*100:0;return(0,a.jsxs)("button",{onClick:()=>d(c===t?null:t),className:(0,n.cn)("w-full flex items-center gap-2 py-1 rounded-lg transition-colors",c===t&&"bg-white shadow-sm"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 w-12",children:[(0,a.jsx)(ej.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t})]}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full transition-all",style:{width:"".concat(l,"%")}})}),(0,a.jsx)("span",{className:"text-xs text-gray-500 w-8",children:s})]},t)})})]})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsx)("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[{id:"latest",label:"최신순"},{id:"helpful",label:"도움순"},{id:"rating",label:"평점순"}].map(e=>(0,a.jsx)("button",{onClick:()=>i(e.id),className:(0,n.cn)("px-3 py-1 text-sm rounded-md transition-colors",r===e.id?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:e.label},e.id))}),(0,a.jsxs)("button",{onClick:()=>x(!o),className:(0,n.cn)("flex items-center gap-1 px-3 py-1.5 rounded-lg border text-sm transition-colors",o?"border-pink-300 bg-pink-50 text-pink-600":"border-gray-200 text-gray-600 hover:border-gray-300"),children:[(0,a.jsx)(ef.A,{className:"h-4 w-4"}),"사진 후기만"]}),c&&(0,a.jsxs)("button",{onClick:()=>d(null),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg border border-pink-300 bg-pink-50 text-pink-600 text-sm",children:[c,"점만 보기",(0,a.jsx)("span",{className:"ml-1",children:"\xd7"})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===p.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"조건에 맞는 후기가 없습니다."}):p.map(e=>(0,a.jsx)(ev,{review:e},e.id))})]})}function ev(e){var t,s,i;let{review:c}=e,[d,o]=(0,l.useState)(!1),[x,m]=(0,l.useState)(c.helpful_count),[h,g]=(0,l.useState)(!1),[p,u]=(0,l.useState)(null),j=c.content.length>200;return(0,a.jsxs)("article",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(null==(t=c.user)?void 0:t.avatar_url)?(0,a.jsx)("img",{src:c.user.avatar_url,alt:"",className:"w-10 h-10 rounded-full object-cover"}):(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-400 to-purple-400 flex items-center justify-center text-white font-medium",children:((null==(s=c.user)?void 0:s.display_name)||"U").charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:(null==(i=c.user)?void 0:i.display_name)||"익명"}),c.is_verified_purchase&&(0,a.jsxs)(r.E,{variant:"outline",className:"text-xs border-green-300 text-green-600",children:[(0,a.jsx)(eb.A,{className:"h-3 w-3 mr-1"}),"구매인증"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(e=>(0,a.jsx)(ej.A,{className:(0,n.cn)("h-3.5 w-3.5",e<=(c.rating||0)?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},e))}),(0,a.jsx)("span",{className:"text-gray-400",children:"\xb7"}),(0,a.jsx)("span",{className:"text-gray-400",children:new Date(c.created_at).toLocaleDateString("ko-KR")})]})]})]})}),c.title&&(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:c.title}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:h||!j?c.content:"".concat(c.content.slice(0,200),"...")}),j&&(0,a.jsxs)("button",{onClick:()=>g(!h),className:"text-sm text-pink-600 hover:text-pink-700 mt-1 flex items-center gap-1",children:[h?"접기":"더보기",(0,a.jsx)(M.A,{className:(0,n.cn)("h-4 w-4",h&&"rotate-180")})]}),c.images&&c.images.length>0&&(0,a.jsx)("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-2",children:c.images.map((e,t)=>(0,a.jsx)("button",{onClick:()=>u(e),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100",children:(0,a.jsx)("img",{src:e,alt:"후기 이미지 ".concat(t+1),className:"w-full h-full object-cover hover:opacity-90 transition-opacity"})},t))}),(0,a.jsx)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100",children:(0,a.jsxs)("button",{onClick:()=>{o(!d),m(e=>d?e-1:e+1)},className:(0,n.cn)("flex items-center gap-1.5 text-sm transition-colors",d?"text-pink-600":"text-gray-500 hover:text-pink-600"),children:[(0,a.jsx)(eN.A,{className:(0,n.cn)("h-4 w-4",d&&"fill-pink-600")}),"도움이 돼요 ",x>0&&"(".concat(x,")")]})}),p&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>u(null),children:[(0,a.jsx)("img",{src:p,alt:"후기 이미지",className:"max-w-full max-h-full object-contain"}),(0,a.jsx)("button",{className:"absolute top-4 right-4 text-white text-2xl",onClick:()=>u(null),children:"\xd7"})]})]})}function ew(e){let{campaign:t,tiers:s,updates:r,faqs:n,comments:i,reviews:c}=e,d=s||[],x=r||[],m=n||[],h=i||[],g=c||[],[p,j]=(0,l.useState)(null),[f,b]=(0,l.useState)("intro"),N=()=>{p&&alert('"'.concat(p.title,'" 리워드로 ').concat(p.price_dt.toLocaleString()," DT 후원을 진행합니다."))};x.length,m.length,h.length,g.length;let y=[{id:"intro",label:"소개"},{id:"rewards",label:"리워드",count:d.length},{id:"updates",label:"새소식",count:x.length},{id:"faq",label:"FAQ",count:m.length},{id:"community",label:"커뮤니티",count:h.length},{id:"reviews",label:"후기",count:g.length}].filter(e=>"intro"===e.id||"rewards"===e.id||(e.count||0)>0);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("section",{className:"bg-white border-b border-gray-100",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6 lg:py-10",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-[1fr_400px] gap-8",children:[(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(w,{coverImage:t.cover_image_url,galleryImages:t.gallery_images,title:t.title})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(o,{campaign:t}),(0,a.jsx)(u,{campaign:t}),t.event_schedule&&Object.keys(t.event_schedule).length>0&&(0,a.jsx)(R,{schedule:t.event_schedule}),(0,a.jsx)("div",{className:"lg:hidden",children:(0,a.jsx)(q,{campaign:t,tiers:d,selectedTier:p,onSelectTier:j,onPledge:N})})]})]})})}),t.benefits&&t.benefits.length>0&&(0,a.jsx)("section",{className:"bg-white border-b border-gray-100",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,a.jsx)(P,{benefits:t.benefits})})}),(0,a.jsx)("section",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-[1fr_400px] gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(_,{tabs:y,activeTab:f,onTabChange:b}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 min-h-[400px]",children:["intro"===f&&(0,a.jsx)(G,{campaign:t}),"rewards"===f&&(0,a.jsx)(ea,{tiers:d,selectedTier:p,onSelectTier:j}),"updates"===f&&(0,a.jsx)(en,{updates:x}),"faq"===f&&(0,a.jsx)(ed,{faqs:m}),"community"===f&&(0,a.jsx)(ep,{comments:h,onAddComment:(e,t)=>{console.log("New comment:",{content:e,parentId:t}),alert("데모 모드에서는 댓글 작성이 지원되지 않습니다.")}}),"reviews"===f&&(0,a.jsx)(ey,{reviews:g})]})]}),(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)("div",{className:"sticky top-24",children:(0,a.jsx)(q,{campaign:t,tiers:d,selectedTier:p,onSelectTier:j,onPledge:N})})})]})})]})}},7003:(e,t,s)=>{"use strict";s.d(t,{Button:()=>n});var a=s(5155),l=s(2115),r=s(3564);let n=(0,l.forwardRef)((e,t)=>{let{className:s,variant:l="primary",size:n="md",loading:i,disabled:c,children:d,...o}=e;return(0,a.jsxs)("button",{ref:t,className:(0,r.cn)("inline-flex items-center justify-center font-medium transition-colors rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border-2 border-gray-200 text-gray-700 hover:border-primary-500 hover:text-primary-500 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500"}[l],{sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[n],s),disabled:c||i,...o,children:[i&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})});n.displayName="Button"},7812:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var a=s(5155);s(2115);var l=s(3101),r=s(3564);let n=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...l}=e;return(0,a.jsx)("div",{className:(0,r.cn)(n({variant:s}),t),...l})}},8525:(e,t,s)=>{"use strict";s.r(t),s.d(t,{createClient:()=>r});var a=s(5417),l=s(5704);function r(){return(0,a.createBrowserClient)(l.env.NEXT_PUBLIC_SUPABASE_URL,l.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}}},e=>{e.O(0,[2619,4909,5417,5239,1942,8441,1255,7358],()=>e(e.s=4409)),_N_E=e.O()}]);