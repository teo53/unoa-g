(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10,8525],{1715:(e,t,s)=>{Promise.resolve().then(s.bind(s,8731))},3564:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(2821),l=s(5889);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}},4679:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>x,L3:()=>g,c7:()=>u,lG:()=>d});var a=s(5155),l=s(2115),r=s(3564),n=s(5229);let i=l.createContext(void 0),c=()=>{let e=l.useContext(i);if(!e)throw Error("useDialog must be used within a Dialog");return e},d=e=>{let{open:t=!1,onOpenChange:s,children:r}=e,[n,c]=l.useState(t),d=void 0!==s,o=d?t:n;return(0,a.jsx)(i.Provider,{value:{open:o,onOpenChange:d?s:c},children:r})};l.forwardRef((e,t)=>{let{asChild:s,children:r,onClick:n,...i}=e,{onOpenChange:d}=c(),o=e=>{null==n||n(e),d(!0)};return s&&l.isValidElement(r)?l.cloneElement(r,{onClick:o,ref:t}):(0,a.jsx)("button",{ref:t,onClick:o,...i,children:r})}).displayName="DialogTrigger";let o=e=>{let{children:t}=e,{open:s}=c();return s?(0,a.jsx)(a.Fragment,{children:t}):null},m=l.forwardRef((e,t)=>{let{className:s,...l}=e,{onOpenChange:n}=c();return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),onClick:()=>n(!1),...l})});m.displayName="DialogOverlay";let x=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e,{onOpenChange:d}=c();return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)("div",{ref:t,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),onClick:e=>e.stopPropagation(),...i,children:[l,(0,a.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",onClick:()=>d(!1),children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName="DialogContent";let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};u.displayName="DialogHeader";let g=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("h2",{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});g.displayName="DialogTitle",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})}).displayName="DialogDescription"},7003:(e,t,s)=>{"use strict";s.d(t,{Button:()=>n});var a=s(5155),l=s(2115),r=s(3564);let n=(0,l.forwardRef)((e,t)=>{let{className:s,variant:l="primary",size:n="md",loading:i,disabled:c,children:d,...o}=e;return(0,a.jsxs)("button",{ref:t,className:(0,r.cn)("inline-flex items-center justify-center font-medium transition-colors rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border-2 border-gray-200 text-gray-700 hover:border-primary-500 hover:text-primary-500 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500"}[l],{sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[n],s),disabled:c||i,...o,children:[i&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})});n.displayName="Button"},8525:(e,t,s)=>{"use strict";s.r(t),s.d(t,{createClient:()=>r});var a=s(5417),l=s(5704);function r(){return(0,a.createBrowserClient)(l.env.NEXT_PUBLIC_SUPABASE_URL,l.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},8731:(e,t,s)=>{"use strict";s.d(t,{default:()=>ew});var a=s(5155),l=s(2115),r=s(63),n=s(2619),i=s.n(n),c=s(2108),d=s(4033),o=s(5626),m=s(6046),x=s(7828),u=s(8085),g=s(6191),h=s(9476),p=s(1360),j=s(7003),v=s(5229),f=s(5299),y=s(1786),b=s(859),N=s(3564);let w=l.forwardRef((e,t)=>{let{className:s,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:(0,N.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});w.displayName="Input";var _=s(8525);let C=["image/jpeg","image/png","image/gif","image/webp"],k=["jpg","jpeg","png","gif","webp"];async function A(e){let{bucket:t,folder:s,file:a,onProgress:l}=e,r=function(e){var t;if(e.size>5242880)return{valid:!1,error:"파일 크기가 ".concat(5,"MB를 초과합니다. (현재: ").concat((e.size/1024/1024).toFixed(2),"MB)")};if(!C.includes(e.type))return{valid:!1,error:"지원하지 않는 파일 형식입니다. (지원: JPG, PNG, GIF, WebP)"};let s=null==(t=e.name.split(".").pop())?void 0:t.toLowerCase();return s&&k.includes(s)?{valid:!0}:{valid:!1,error:"지원하지 않는 파일 확장자입니다. (지원: ".concat(k.join(", "),")")}}(a);if(!r.valid)return{url:"",path:"",error:r.error};let n=(0,_.createClient)(),i=function(e){var t;let s=(null==(t=e.split(".").pop())?void 0:t.toLowerCase())||"jpg",a=Date.now(),l=Math.random().toString(36).substring(2,8);return"".concat(a,"-").concat(l,".").concat(s)}(a.name),c=s?"".concat(s,"/").concat(i):i;try{null==l||l(0);let{data:e,error:s}=await n.storage.from(t).upload(c,a,{cacheControl:"3600",upsert:!1});if(s)return console.error("Upload error:",s),{url:"",path:"",error:"업로드 실패: ".concat(s.message)};return null==l||l(100),{url:function(e,t){let{data:s}=(0,_.createClient)().storage.from(e).getPublicUrl(t);return s.publicUrl}(t,e.path),path:e.path}}catch(e){return console.error("Upload exception:",e),{url:"",path:"",error:"업로드 중 오류가 발생했습니다."}}}async function D(e,t){let s=(0,_.createClient)();try{let{error:a}=await s.storage.from(e).remove([t]);if(a)return console.error("Delete error:",a),{success:!1,error:"삭제 실패: ".concat(a.message)};return{success:!0}}catch(e){return console.error("Delete exception:",e),{success:!1,error:"삭제 중 오류가 발생했습니다."}}}function S(e){let{bucket:t,folder:s,value:r,onChange:n,onRemove:i,accept:c="image/jpeg,image/png,image/gif,image/webp",maxSizeMB:d=5,aspectRatio:o,className:m,placeholder:x="이미지를 드래그하거나 클릭하여 업로드",showUrlInput:u=!0,disabled:g=!1}=e,[h,p]=(0,l.useState)(!1),[_,C]=(0,l.useState)(!1),[k,S]=(0,l.useState)(0),[B,z]=(0,l.useState)(null),[T,P]=(0,l.useState)(!1),[L,E]=(0,l.useState)(""),O=(0,l.useRef)(null),R=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),g||p(!0)},[g]),q=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),p(!1)},[]),I=(0,l.useCallback)(async e=>{if(e.preventDefault(),e.stopPropagation(),p(!1),g)return;let t=e.dataTransfer.files;t.length>0&&await G(t[0])},[g,t,s]),U=(0,l.useCallback)(async e=>{let t=e.target.files;t&&t.length>0&&await G(t[0]),O.current&&(O.current.value="")},[t,s]),G=async e=>{z(null),C(!0),S(0);try{let a=await A({bucket:t,folder:s,file:e,onProgress:S});a.error?z(a.error):n(a.url)}catch(e){z("업로드 중 오류가 발생했습니다."),console.error("Upload error:",e)}finally{C(!1),S(0)}},M=(0,l.useCallback)(async()=>{if(r){if(r.includes("/storage/v1/object/public/")){let e=function(e,t){try{let s=new RegExp("/storage/v1/object/public/".concat(t,"/(.+)$")),a=e.match(s);return a?a[1]:null}catch(e){return null}}(r,t);e&&await D(t,e)}n(""),null==i||i()}},[r,t,n,i]),F=(0,l.useCallback)(()=>{if(L.trim()){if(!function(e){if(!e)return!1;try{let t=new URL(e);return["http:","https:"].includes(t.protocol)}catch(e){return!1}}(L))return void z("올바른 이미지 URL을 입력해주세요.");z(null),n(L),E(""),P(!1)}},[L,n]),H=!!r;return(0,a.jsxs)("div",{className:(0,N.cn)("space-y-2",m),children:[(0,a.jsxs)("div",{className:(0,N.cn)("relative border-2 border-dashed rounded-lg transition-colors cursor-pointer overflow-hidden",h&&"border-primary bg-primary/5",!h&&!H&&"border-gray-300 hover:border-gray-400",H&&"border-transparent",g&&"opacity-50 cursor-not-allowed",_&&"cursor-wait"),style:o?{aspectRatio:"".concat(o)}:{},onDragOver:R,onDragLeave:q,onDrop:I,onClick:()=>{if(!g&&!_){var e;null==(e=O.current)||e.click()}},children:[(0,a.jsx)("input",{ref:O,type:"file",accept:c,onChange:U,className:"hidden",disabled:g||_}),H?(0,a.jsxs)("div",{className:"relative w-full h-full min-h-[120px]",children:[(0,a.jsx)("img",{src:r,alt:"Uploaded",className:"w-full h-full object-cover",onError:()=>z("이미지를 불러올 수 없습니다.")}),!g&&(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),M()},className:"absolute top-2 right-2 p-1.5 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}):_?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 min-h-[120px]",children:[(0,a.jsx)(f.A,{className:"h-8 w-8 text-primary animate-spin mb-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["업로드 중... ",k,"%"]}),(0,a.jsx)("div",{className:"w-full max-w-xs mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-primary transition-all duration-300",style:{width:"".concat(k,"%")}})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 min-h-[120px]",children:[(0,a.jsx)("div",{className:(0,N.cn)("p-3 rounded-full mb-3",h?"bg-primary/10":"bg-gray-100"),children:(0,a.jsx)(y.A,{className:(0,N.cn)("h-6 w-6",h?"text-primary":"text-gray-400")})}),(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center",children:x}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["JPG, PNG, GIF, WebP (최대 ",d,"MB)"]})]})]}),B&&(0,a.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),B]}),u&&!H&&!_&&(0,a.jsx)("div",{className:"space-y-2",children:T?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(w,{placeholder:"https://example.com/image.jpg",value:L,onChange:e=>E(e.target.value),onKeyDown:e=>"Enter"===e.key&&F(),disabled:g,className:"flex-1"}),(0,a.jsx)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:F,disabled:g||!L.trim(),children:(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{P(!1),E(""),z(null)},children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}):(0,a.jsxs)("button",{type:"button",onClick:()=>P(!0),className:"text-xs text-gray-500 hover:text-gray-700 flex items-center gap-1",disabled:g,children:[(0,a.jsx)(b.A,{className:"h-3 w-3"}),"URL로 직접 입력"]})})]})}var B=s(6098),z=s(4435),T=s(3660),P=s(4036),L=s(6135),E=s(7004),O=s(7048),R=s(4615),q=s(5833),I=s(7456),U=s(3),G=s(7239),M=s(5789),F=s(2196),H=s(64),K=s(949),W=s(651),Y=s(4679);function V(e){let{open:t,onOpenChange:s,onInsert:r,folder:n="content"}=e,[i,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(""),m=()=>{c(""),o(""),s(!1)};return(0,a.jsx)(Y.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(Y.Cf,{className:"sm:max-w-md",children:[(0,a.jsx)(Y.c7,{children:(0,a.jsxs)(Y.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(F.A,{className:"h-5 w-5"}),"이미지 삽입"]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(S,{bucket:"campaign-images",folder:n,value:i,onChange:c,placeholder:"이미지를 드래그하거나 클릭하여 업로드",showUrlInput:!0}),i&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"대체 텍스트 (선택사항)"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>o(e.target.value),placeholder:"이미지 설명을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"화면 읽기 프로그램 사용자를 위한 이미지 설명입니다."})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,a.jsx)(j.Button,{type:"button",variant:"outline",onClick:m,children:"취소"}),(0,a.jsx)(j.Button,{type:"button",onClick:()=>{i&&(r(i,d||void 0),m())},disabled:!i,children:"삽입"})]})]})]})})}function X(e){let{content:t,onChange:s,placeholder:r="프로젝트를 소개해주세요...",campaignId:n}=e,[i,c]=(0,l.useState)(!1),d=(0,B.hG)({extensions:[z.A.configure({heading:{levels:[1,2,3]}}),T.Ay.configure({HTMLAttributes:{class:"rounded-lg max-w-full"}}),P.A.configure({width:640,height:360,HTMLAttributes:{class:"rounded-lg"}}),L.Ay.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-500 underline"}}),E.A.configure({placeholder:r})],content:t,editorProps:{attributes:{class:"tiptap prose prose-gray max-w-none focus:outline-none min-h-[300px] p-4"}},onUpdate:e=>{let{editor:t}=e,a=t.getHTML();s(t.getText(),a)}});if(!d)return(0,a.jsx)("div",{className:"border border-gray-200 rounded-xl p-4 min-h-[400px] animate-pulse bg-gray-50"});let o=e=>{let{onClick:t,isActive:s=!1,children:l,title:r}=e;return(0,a.jsx)("button",{type:"button",onClick:t,title:r,className:(0,N.cn)("p-2 rounded-lg transition-colors",s?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100"),children:l})};return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-200 bg-gray-50",children:[(0,a.jsx)(o,{onClick:()=>d.chain().focus().toggleBold().run(),isActive:d.isActive("bold"),title:"굵게",children:(0,a.jsx)(O.A,{className:"w-4 h-4"})}),(0,a.jsx)(o,{onClick:()=>d.chain().focus().toggleItalic().run(),isActive:d.isActive("italic"),title:"기울임",children:(0,a.jsx)(R.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-200 mx-1"}),(0,a.jsx)(o,{onClick:()=>d.chain().focus().toggleHeading({level:1}).run(),isActive:d.isActive("heading",{level:1}),title:"제목 1",children:(0,a.jsx)(q.A,{className:"w-4 h-4"})}),(0,a.jsx)(o,{onClick:()=>d.chain().focus().toggleHeading({level:2}).run(),isActive:d.isActive("heading",{level:2}),title:"제목 2",children:(0,a.jsx)(I.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-200 mx-1"}),(0,a.jsx)(o,{onClick:()=>d.chain().focus().toggleBulletList().run(),isActive:d.isActive("bulletList"),title:"목록",children:(0,a.jsx)(U.A,{className:"w-4 h-4"})}),(0,a.jsx)(o,{onClick:()=>d.chain().focus().toggleOrderedList().run(),isActive:d.isActive("orderedList"),title:"번호 목록",children:(0,a.jsx)(G.A,{className:"w-4 h-4"})}),(0,a.jsx)(o,{onClick:()=>d.chain().focus().toggleBlockquote().run(),isActive:d.isActive("blockquote"),title:"인용",children:(0,a.jsx)(M.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-200 mx-1"}),(0,a.jsx)(o,{onClick:()=>c(!0),title:"이미지 삽입",children:(0,a.jsx)(F.A,{className:"w-4 h-4"})}),(0,a.jsx)(o,{onClick:()=>{let e=window.prompt("YouTube URL을 입력하세요");e&&d.chain().focus().setYoutubeVideo({src:e}).run()},title:"YouTube 영상 삽입",children:(0,a.jsx)(H.A,{className:"w-4 h-4"})}),(0,a.jsx)(o,{onClick:()=>{let e=window.prompt("링크 URL을 입력하세요");e&&d.chain().focus().setLink({href:e}).run()},isActive:d.isActive("link"),title:"링크 삽입",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(o,{onClick:()=>d.chain().focus().undo().run(),title:"실행취소",children:(0,a.jsx)(K.A,{className:"w-4 h-4"})}),(0,a.jsx)(o,{onClick:()=>d.chain().focus().redo().run(),title:"다시실행",children:(0,a.jsx)(W.A,{className:"w-4 h-4"})})]}),(0,a.jsx)(B.$Z,{editor:d}),(0,a.jsx)(V,{open:i,onOpenChange:e=>c(e),onInsert:(e,t)=>{e&&d.chain().focus().setImage({src:e,alt:t||""}).run()},folder:n?"campaign-".concat(n,"/content"):"content"})]})}var $=s(7376);let J=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("label",{ref:t,className:(0,N.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...l})});function Q(e){let{images:t,onChange:s}=e,[r,n]=(0,l.useState)(null),i=(e,a,l)=>{let r=[...t];r[e]={...r[e],[a]:l},s(r)},c=()=>{n(null)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(J,{className:"text-base font-semibold",children:"갤러리 이미지"}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e={url:"",caption:"",display_order:t.length};s([...t,e])},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"이미지 추가"]})]}),0===t.length?(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-8 text-center",children:[(0,a.jsx)(F.A,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"갤러리에 표시할 이미지를 추가하세요"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"드래그하여 순서를 변경할 수 있습니다"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,l)=>(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>{n(l)},onDragOver:e=>((e,a)=>{if(e.preventDefault(),null===r||r===a)return;let l=[...t],[i]=l.splice(r,1);l.splice(a,0,i),l.forEach((e,t)=>{e.display_order=t}),s(l),n(a)})(e,l),onDragEnd:c,className:"flex gap-3 p-3 border rounded-lg bg-white transition-all ".concat(r===l?"opacity-50 border-pink-300":"border-gray-200"),children:[(0,a.jsx)("div",{className:"flex items-center cursor-grab active:cursor-grabbing",children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("div",{className:"w-32 flex-shrink-0",children:(0,a.jsx)(S,{bucket:"campaign-images",folder:"gallery",value:e.url,onChange:e=>i(l,"url",e),aspectRatio:1,placeholder:"이미지 업로드",showUrlInput:!1})}),(0,a.jsx)("div",{className:"flex-1 self-center",children:(0,a.jsx)(w,{placeholder:"캡션 (선택사항)",value:e.caption||"",onChange:e=>i(l,"caption",e.target.value),className:"text-sm"})}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500 self-start",onClick:()=>(e=>{let a=t.filter((t,s)=>s!==e);a.forEach((e,t)=>{e.display_order=t}),s(a)})(l),children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]},l))}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 팁: 첫 번째 이미지가 메인 갤러리 이미지로 표시됩니다"})]})}J.displayName="Label";var Z=s(6485);function ee(e){var t,s;let{schedule:l,onChange:r}=e,n=(e,t)=>{r({...l,[e]:t})},i=(e,t)=>{let s=l.sale_period||{start:"",end:""};r({...l,sale_period:{...s,[e]:t}})},c=(e,t,s)=>{let a=[...l.custom_events||[]];a[e]={...a[e],[t]:s},r({...l,custom_events:a})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(Z.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)(J,{className:"text-base font-semibold",children:"이벤트 일정"})]}),(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)(J,{className:"text-sm font-medium text-gray-700",children:"\uD83D\uDED2 판매 기간"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"시작일"}),(0,a.jsx)(w,{type:"date",value:(null==(t=l.sale_period)?void 0:t.start)||"",onChange:e=>i("start",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"종료일"}),(0,a.jsx)(w,{type:"date",value:(null==(s=l.sale_period)?void 0:s.end)||"",onChange:e=>i("end",e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J,{className:"text-sm font-medium text-gray-700",children:"\uD83C\uDF89 당첨자 발표"}),(0,a.jsx)(w,{placeholder:"예: 2026-02-06 14:00 (KST)",value:l.winner_announce||"",onChange:e=>n("winner_announce",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J,{className:"text-sm font-medium text-gray-700",children:"\uD83C\uDFA4 팬사인회 일시"}),(0,a.jsx)(w,{placeholder:"예: 2026-02-10 19:30",value:l.fansign_date||"",onChange:e=>n("fansign_date",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J,{className:"text-sm font-medium text-gray-700",children:"\uD83D\uDCF1 영상통화 일시"}),(0,a.jsx)(w,{placeholder:"예: 2026-02-10 (1부 종료 후)",value:l.videocall_date||"",onChange:e=>n("videocall_date",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J,{className:"text-sm font-medium text-gray-700",children:"\uD83D\uDCE6 배송 예정일"}),(0,a.jsx)(w,{placeholder:"예: 2026년 2월 말 순차 배송",value:l.shipping_date||"",onChange:e=>n("shipping_date",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(J,{className:"text-sm font-medium text-gray-700",children:"\uD83D\uDCCC 추가 일정"}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=l.custom_events||[];r({...l,custom_events:[...e,{label:"",date:"",description:""}]})},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"일정 추가"]})]}),l.custom_events&&l.custom_events.length>0&&(0,a.jsx)("div",{className:"space-y-3",children:l.custom_events.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-start p-3 border rounded-lg bg-white",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)(w,{placeholder:"일정 이름 (예: 포토카드 추가 증정)",value:e.label,onChange:e=>c(t,"label",e.target.value),className:"text-sm"}),(0,a.jsx)(w,{placeholder:"날짜/시간 (예: 2026-02-08 18:00)",value:e.date,onChange:e=>c(t,"date",e.target.value),className:"text-sm"}),(0,a.jsx)(w,{placeholder:"설명 (선택사항)",value:e.description||"",onChange:e=>c(t,"description",e.target.value),className:"text-sm"})]}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500",onClick:()=>(e=>{let t=(l.custom_events||[]).filter((t,s)=>s!==e);r({...l,custom_events:t})})(t),children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]},t))})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Makestar 스타일의 이벤트 일정 박스가 캠페인 상세 페이지에 표시됩니다"})]})}let et=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("textarea",{className:(0,N.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});et.displayName="Textarea";var es=s(709);let ea=[{value:"all",label:"전원",color:"bg-blue-100 text-blue-700"},{value:"winner",label:"당첨자",color:"bg-yellow-100 text-yellow-700"},{value:"fansign",label:"팬사인회",color:"bg-pink-100 text-pink-700"},{value:"videocall",label:"영상통화",color:"bg-purple-100 text-purple-700"}];function el(e){let{benefits:t,onChange:s}=e,[r,n]=(0,l.useState)(0),i=(e,a,l)=>{let r=[...t];r[e]={...r[e],[a]:l},s(r)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(es.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)(J,{className:"text-base font-semibold",children:"특전 안내"})]}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{s([...t,{title:"",description:"",images:[],for_type:"all"}]),n(t.length)},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"특전 추가"]})]}),0===t.length?(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-8 text-center",children:[(0,a.jsx)(es.A,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"펀딩 참여자에게 제공할 특전을 추가하세요"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"전원/당첨자/팬사인회/영상통화별로 다른 특전 설정 가능"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,l)=>{let o=r===l,m=ea.find(t=>t.value===e.for_type)||ea[0];return(0,a.jsxs)("div",{className:"border rounded-lg bg-white overflow-hidden",children:[(0,a.jsxs)("button",{type:"button",className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50",onClick:()=>n(o?null:l),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat(m.color),children:m.label}),(0,a.jsx)("span",{className:"font-medium text-gray-900 text-left",children:e.title||"(제목 없음)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500",onClick:e=>{e.stopPropagation(),s(t.filter((e,t)=>t!==l)),r===l&&n(null)},children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),o?(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"})]})]}),o&&(0,a.jsxs)("div",{className:"px-4 pb-4 space-y-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,a.jsx)(J,{className:"text-sm text-gray-600",children:"대상"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:ea.map(t=>(0,a.jsx)("button",{type:"button",className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors ".concat(e.for_type===t.value?t.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"),onClick:()=>i(l,"for_type",t.value),children:t.label},t.value))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J,{className:"text-sm text-gray-600",children:"특전 이름 *"}),(0,a.jsx)(w,{placeholder:"예: 미공개 셀카 포토카드 1매",value:e.title,onChange:e=>i(l,"title",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J,{className:"text-sm text-gray-600",children:"설명"}),(0,a.jsx)(et,{placeholder:"예: 앨범 1장당 1장 랜덤, 6종 중 랜덤 1종",value:e.description,onChange:e=>i(l,"description",e.target.value),rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(J,{className:"text-sm text-gray-600",children:"이미지"}),(0,a.jsxs)(j.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{let s=t[e].images||[];i(e,"images",[...s,""])})(l),children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"이미지 추가"]})]}),e.images&&e.images.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:e.images.map((e,s)=>(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(S,{bucket:"benefit-images",folder:"benefit-".concat(l),value:e,onChange:e=>((e,s,a)=>{let l=[...t[e].images||[]];l[s]=a,i(e,"images",l)})(l,s,e),onRemove:()=>((e,s)=>{let a=(t[e].images||[]).filter((e,t)=>t!==s);i(e,"images",a)})(l,s),aspectRatio:1,placeholder:"특전 이미지",showUrlInput:!1})},s))})]})]})]},l)})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Makestar 스타일의 특전 안내 섹션이 캠페인 상세 페이지에 표시됩니다"})]})}var er=s(814),en=s(5917);function ei(e){let{goals:t,currentAmountDt:s,onChange:r}=e,[n,i]=(0,l.useState)(null),c=(e,a,l)=>{let n=[...t];n[e]={...n[e],[a]:l},"amount_dt"===a&&(n[e].is_reached=s>=l),r(n)},d=()=>{i(null)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(er.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)(J,{className:"text-base font-semibold",children:"스트레치 골"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[t.length>1&&(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{r([...t].sort((e,t)=>e.amount_dt-t.amount_dt))},children:"금액순 정렬"}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{r([...t,{amount_dt:0,title:"",description:"",is_reached:!1}])},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"목표 추가"]})]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["현재 모금액: ",(0,a.jsxs)("span",{className:"font-bold text-pink-600",children:[s.toLocaleString()," DT"]})]}),0===t.length?(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-8 text-center",children:[(0,a.jsx)(er.A,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"목표 금액 달성 시 추가 보상을 설정하세요"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Tumblbug 스타일의 스트레치 골이 표시됩니다"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,l)=>{let o=e.amount_dt>0?Math.min(s/e.amount_dt*100,100):0,m=s>=e.amount_dt&&e.amount_dt>0;return(0,a.jsx)("div",{draggable:!0,onDragStart:()=>{i(l)},onDragOver:e=>((e,s)=>{if(e.preventDefault(),null===n||n===s)return;let a=[...t],[l]=a.splice(n,1);a.splice(s,0,l),r(a),i(s)})(e,l),onDragEnd:d,className:"p-4 border rounded-lg bg-white transition-all ".concat(n===l?"opacity-50 border-pink-300":"border-gray-200"," ").concat(m?"bg-green-50 border-green-200":""),children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex items-start pt-2 cursor-grab active:cursor-grabbing",children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"목표 금액 (DT)"}),(0,a.jsx)(w,{type:"number",placeholder:"300000",value:e.amount_dt||"",onChange:e=>c(l,"amount_dt",parseInt(e.target.value)||0),className:"mt-1"})]}),m&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-green-600 text-sm font-medium mt-5",children:[(0,a.jsx)(en.A,{className:"h-4 w-4"}),"달성!"]})]}),e.amount_dt>0&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full transition-all ".concat(m?"bg-green-500":"bg-pink-500"),style:{width:"".concat(o,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 text-right",children:[o.toFixed(1),"% 달성"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"보상 이름 *"}),(0,a.jsx)(w,{placeholder:"예: 포토카드 추가 2종",value:e.title,onChange:e=>c(l,"title",e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"설명"}),(0,a.jsx)(et,{placeholder:"예: 랜덤 포토카드 2종 추가 증정",value:e.description||"",onChange:e=>c(l,"description",e.target.value),rows:2,className:"mt-1"})]})]}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500 self-start",onClick:()=>{r(t.filter((e,t)=>t!==l))},children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]})},l)})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:'\uD83D\uDCA1 목표 금액에 도달하면 자동으로 "달성" 표시가 됩니다'})]})}var ec=s(7454);let ed=[{name:"제작비",amount:0,percentage:0},{name:"배송비",amount:0,percentage:0},{name:"수수료",amount:0,percentage:0}];function eo(e){let{budget:t,onChange:s}=e,l=t.items&&t.items.length>0?t.items:ed,r=(e,a,r)=>{let i=[...l];i[e]={...i[e],[a]:r},"amount"===a?n(i):s({...t,items:i})},n=e=>{let t=e.reduce((e,t)=>e+(t.amount||0),0);s({items:e.map(e=>({...e,percentage:t>0?Math.round(e.amount/t*100):0})),total:t,currency:"DT"})},i=l.reduce((e,t)=>e+(t.amount||0),0);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ec.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)(J,{className:"text-base font-semibold",children:"예산 정보"})]}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{n([...l,{name:"",amount:0,percentage:0}])},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"항목 추가"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-3 items-center p-3 border rounded-lg bg-white",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"항목명"}),(0,a.jsx)(w,{placeholder:"예: 제작비",value:e.name,onChange:e=>r(t,"name",e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{className:"w-32",children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"금액 (DT)"}),(0,a.jsx)(w,{type:"number",placeholder:"0",value:e.amount||"",onChange:e=>r(t,"amount",parseInt(e.target.value)||0),className:"mt-1"})]}),(0,a.jsxs)("div",{className:"w-20",children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"비율"}),(0,a.jsxs)("div",{className:"mt-1 h-10 flex items-center justify-center bg-gray-50 rounded-md text-sm font-medium text-gray-600",children:[e.percentage,"%"]})]}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500 self-end mb-1",onClick:()=>{n(l.filter((e,s)=>s!==t))},children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]},t))}),l.some(e=>e.amount>0)&&(0,a.jsxs)("div",{className:"space-y-2 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)(J,{className:"text-sm font-medium text-gray-700",children:"예산 분배"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden flex",children:l.map((e,t)=>e.percentage>0&&(0,a.jsx)("div",{className:"h-full transition-all ".concat(["bg-pink-500","bg-purple-500","bg-blue-500","bg-green-500","bg-orange-500","bg-yellow-500"][t%6]),style:{width:"".concat(e.percentage,"%")},title:"".concat(e.name,": ").concat(e.percentage,"%")},t))}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3 mt-2",children:l.map((e,t)=>e.amount>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(["bg-pink-500","bg-purple-500","bg-blue-500","bg-green-500","bg-orange-500","bg-yellow-500"][t%6])}),(0,a.jsx)("span",{className:"text-gray-600",children:e.name}),(0,a.jsxs)("span",{className:"font-medium",children:[e.percentage,"%"]})]},t))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-pink-50 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"총 예산"}),(0,a.jsxs)("span",{className:"text-xl font-bold text-pink-600",children:[i.toLocaleString()," DT"]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Tumblbug 스타일의 예산 breakdown이 캠페인 소개 탭에 표시됩니다"})]})}function em(e){let{schedule:t,onChange:s}=e,[r,n]=(0,l.useState)(null),i=(e,a,l)=>{let r=[...t];r[e]={...r[e],[a]:l},s(r)},c=()=>{n(null)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Z.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)(J,{className:"text-base font-semibold",children:"일정 정보"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[t.length>1&&(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{s([...t].sort((e,t)=>e.date?t.date?new Date(e.date).getTime()-new Date(t.date).getTime():-1:1))},children:"날짜순 정렬"}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{s([...t,{date:"",milestone:"",description:"",is_completed:!1}])},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"일정 추가"]})]})]}),0===t.length?(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-8 text-center",children:[(0,a.jsx)(Z.A,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"프로젝트 마일스톤 일정을 추가하세요"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"타임라인 형태로 캠페인 소개 탭에 표시됩니다"})]}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-[22px] top-8 bottom-8 w-0.5 bg-gray-200"}),(0,a.jsx)("div",{className:"space-y-4",children:t.map((e,l)=>(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>{n(l)},onDragOver:e=>((e,a)=>{if(e.preventDefault(),null===r||r===a)return;let l=[...t],[i]=l.splice(r,1);l.splice(a,0,i),s(l),n(a)})(e,l),onDragEnd:c,className:"flex gap-3 relative ".concat(r===l?"opacity-50":""),children:[(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let a=[...t];a[e]={...a[e],is_completed:!a[e].is_completed},s(a)})(l),className:"w-11 h-11 rounded-full flex items-center justify-center flex-shrink-0 border-2 transition-colors z-10 ".concat(e.is_completed?"bg-green-500 border-green-500 text-white":"bg-white border-gray-300 text-gray-400 hover:border-pink-500"),children:e.is_completed?(0,a.jsx)(en.A,{className:"h-5 w-5"}):(0,a.jsx)("span",{className:"text-sm font-medium",children:l+1})}),(0,a.jsx)("div",{className:"flex-1 p-4 border rounded-lg bg-white transition-all ".concat(e.is_completed?"border-green-200 bg-green-50":"border-gray-200"),children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex items-start pt-1 cursor-grab active:cursor-grabbing",children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"날짜"}),(0,a.jsx)(w,{type:"date",value:e.date,onChange:e=>i(l,"date",e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"마일스톤 *"}),(0,a.jsx)(w,{placeholder:"예: 샘플 제작 완료",value:e.milestone,onChange:e=>i(l,"milestone",e.target.value),className:"mt-1"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"설명"}),(0,a.jsx)(et,{placeholder:"상세 설명 (선택사항)",value:e.description||"",onChange:e=>i(l,"description",e.target.value),rows:2,className:"mt-1"})]})]}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500 self-start",onClick:()=>{s(t.filter((e,t)=>t!==l))},children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]})})]},l))})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 원형 아이콘을 클릭하면 완료 상태로 표시됩니다"})]})}var ex=s(5239),eu=s(1169);function eg(e){let{team:t,onChange:s}=e,[r,n]=(0,l.useState)(0),i=t.members||[],o=(e,a)=>{s({...t,[e]:a})},m=(e,a,l)=>{let r=[...i];r[e]={...r[e],[a]:l},s({...t,members:r})},x=(e,t,s,a)=>{let l=[...i[e].links||[]];l[t]={...l[t],[s]:a},m(e,"links",l)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eu.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)(J,{className:"text-base font-semibold",children:"팀 소개"})]}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{s({...t,members:[...i,{name:"",role:"",avatar_url:"",bio:"",links:[]}]}),n(i.length)},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"팀원 추가"]})]}),(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-sm text-gray-600",children:"회사/팀명"}),(0,a.jsx)(w,{placeholder:"예: UNO A Entertainment",value:t.company_name||"",onChange:e=>o("company_name",e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-sm text-gray-600",children:"회사/팀 소개"}),(0,a.jsx)(et,{placeholder:"회사 또는 팀에 대한 간략한 소개",value:t.company_description||"",onChange:e=>o("company_description",e.target.value),rows:3,className:"mt-1"})]})]}),0===i.length?(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-8 text-center",children:[(0,a.jsx)(eu.A,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"프로젝트 팀원을 소개하세요"})]}):(0,a.jsx)("div",{className:"space-y-3",children:i.map((e,l)=>{let o=r===l;return(0,a.jsxs)("div",{className:"border rounded-lg bg-white overflow-hidden",children:[(0,a.jsxs)("button",{type:"button",className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50",onClick:()=>n(o?null:l),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex-shrink-0",children:e.avatar_url?(0,a.jsx)(ex.default,{src:e.avatar_url,alt:e.name||"팀원",fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(eu.A,{className:"h-5 w-5 text-gray-300"})})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name||"(이름 없음)"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.role||"역할 미정"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500",onClick:e=>{e.stopPropagation();let a=i.filter((e,t)=>t!==l);s({...t,members:a}),r===l&&n(null)},children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),o?(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"})]})]}),o&&(0,a.jsxs)("div",{className:"px-4 pb-4 space-y-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"pt-4 grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"이름 *"}),(0,a.jsx)(w,{placeholder:"홍길동",value:e.name,onChange:e=>m(l,"name",e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"역할 *"}),(0,a.jsx)(w,{placeholder:"대표, 디자이너, 개발자 등",value:e.role,onChange:e=>m(l,"role",e.target.value),className:"mt-1"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"프로필 이미지"}),(0,a.jsx)("div",{className:"mt-1 w-24",children:(0,a.jsx)(S,{bucket:"team-avatars",folder:"member-".concat(l),value:e.avatar_url||"",onChange:e=>m(l,"avatar_url",e),aspectRatio:1,placeholder:"프로필 사진",showUrlInput:!1,className:"[&>div:first-child]:rounded-full"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"소개"}),(0,a.jsx)(et,{placeholder:"팀원에 대한 간략한 소개",value:e.bio||"",onChange:e=>m(l,"bio",e.target.value),rows:3,className:"mt-1"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"링크"}),(0,a.jsxs)(j.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{let t=i[e].links||[];m(e,"links",[...t,{type:"",url:""}])})(l),children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"링크 추가"]})]}),e.links&&e.links.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:e.links.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(w,{placeholder:"유형 (예: Instagram)",value:e.type,onChange:e=>x(l,t,"type",e.target.value),className:"w-32 text-sm"}),(0,a.jsx)(w,{placeholder:"https://...",value:e.url,onChange:e=>x(l,t,"url",e.target.value),className:"flex-1 text-sm"}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500",onClick:()=>((e,t)=>{let s=(i[e].links||[]).filter((e,s)=>s!==t);m(e,"links",s)})(l,t),children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]},t))})]})]})]},l)})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:'\uD83D\uDCA1 팀 소개는 캠페인 소개 탭의 "팀 소개" 서브탭에 표시됩니다'})]})}var eh=s(2056);function ep(e){let{notices:t,onChange:s}=e,[r,n]=(0,l.useState)(0),[i,o]=(0,l.useState)(null),m=(e,a,l)=>{let r=[...t];r[e]={...r[e],[a]:l},s(r)},x=()=>{o(null)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eh.A,{className:"h-5 w-5 text-yellow-500"}),(0,a.jsx)(J,{className:"text-base font-semibold",children:"유의사항"})]}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e={title:"",content_html:"",display_order:t.length};s([...t,e]),n(t.length)},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"유의사항 추가"]})]}),0===t.length?(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-8 text-center",children:[(0,a.jsx)(eh.A,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"펀딩 참여자가 알아야 할 유의사항을 추가하세요"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"배송, 교환/환불, 이벤트 참여 조건 등"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,l)=>{let u=r===l;return(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>{o(l)},onDragOver:e=>((e,a)=>{if(e.preventDefault(),null===i||i===a)return;let l=[...t],[r]=l.splice(i,1);l.splice(a,0,r),l.forEach((e,t)=>{e.display_order=t}),s(l),o(a)})(e,l),onDragEnd:x,className:"border rounded-lg bg-white overflow-hidden transition-all ".concat(i===l?"opacity-50 border-yellow-300":"border-gray-200"),children:[(0,a.jsxs)("button",{type:"button",className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-50",onClick:()=>n(u?null:l),children:[(0,a.jsx)("div",{className:"cursor-grab active:cursor-grabbing",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900 text-left",children:e.title||"유의사항 ".concat(l+1)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500",onClick:e=>{e.stopPropagation();let a=t.filter((e,t)=>t!==l);a.forEach((e,t)=>{e.display_order=t}),s(a),r===l&&n(null)},children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),u?(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"})]})]})]}),u&&(0,a.jsxs)("div",{className:"px-4 pb-4 space-y-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"제목 *"}),(0,a.jsx)(w,{placeholder:"예: 이벤트 응모자 정보 입력 유의사항",value:e.title,onChange:e=>m(l,"title",e.target.value),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"내용 *"}),(0,a.jsx)(et,{placeholder:"유의사항 내용을 입력하세요. (HTML은 안전한 태그만 허용됩니다)",value:e.content_html,onChange:e=>m(l,"content_html",e.target.value),rows:5,className:"mt-1 font-mono text-sm"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"줄바꿈은 자동으로 적용됩니다"})]})]})]},l)})}),t.length>0&&t.some(e=>e.title&&e.content_html)&&(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-lg space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-yellow-800 flex items-center gap-1",children:[(0,a.jsx)(eh.A,{className:"h-4 w-4"}),"미리보기"]}),(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>e.title&&e.content_html&&(0,a.jsxs)("div",{className:"bg-white p-3 rounded border border-yellow-200",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 text-sm mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600 whitespace-pre-line",children:e.content_html.replace(/<[^>]*>/g,"")})]},t))})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 유의사항은 캠페인 상세 페이지 하단에 표시됩니다"})]})}var ej=s(2472),ev=s(6617),ef=s(6398);let ey=[{value:"",label:"없음",color:"bg-gray-100 text-gray-600"},{value:"recommended",label:"추천",color:"bg-pink-500 text-white"},{value:"limited",label:"한정",color:"bg-orange-500 text-white"},{value:"early_bird",label:"얼리버드",color:"bg-blue-500 text-white"},{value:"best",label:"BEST",color:"bg-purple-500 text-white"},{value:"new",label:"NEW",color:"bg-green-500 text-white"}];function eb(e){var t;let{tier:s,onChange:r}=e,[n,i]=(0,l.useState)("badge"),o=(e,t)=>{r({...s,[e]:t})},m=s.member_options||[],x=(e,t,s)=>{let a=[...m];a[e]={...a[e],[t]:s},o("member_options",a)},u=s.included_items||[],h=(e,t,s)=>{let a=[...u];a[e]={...a[e],[t]:s},o("included_items",a)},v=e=>{let{id:t,title:s,icon:l,children:r}=e,o=n===t;return(0,a.jsxs)("div",{className:"border rounded-lg bg-white overflow-hidden",children:[(0,a.jsxs)("button",{type:"button",className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50",onClick:()=>i(o?null:t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l,(0,a.jsx)("span",{className:"font-medium text-gray-900",children:s})]}),o?(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"})]}),o&&(0,a.jsx)("div",{className:"px-4 pb-4 border-t border-gray-100 pt-4",children:r})]})};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(J,{className:"text-sm font-medium text-gray-700",children:"고급 옵션"}),(0,a.jsx)(v,{id:"badge",title:"뱃지",icon:(0,a.jsx)(ej.A,{className:"h-4 w-4 text-pink-500"}),children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:ey.map(e=>(0,a.jsx)("button",{type:"button",className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors ".concat(s.badge_type===e.value?e.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"),onClick:()=>o("badge_type",e.value||void 0),children:e.label},e.value))}),s.badge_type&&(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"커스텀 라벨 (선택)"}),(0,a.jsx)(w,{placeholder:"기본값 사용",value:s.badge_label||"",onChange:e=>o("badge_label",e.target.value),className:"mt-1"})]})]})}),(0,a.jsx)(v,{id:"members",title:"멤버 선택 옵션 ".concat(m.length>0?"(".concat(m.length,"명)"):""),icon:(0,a.jsx)(eu.A,{className:"h-4 w-4 text-purple-500"}),children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"구매자가 선택할 수 있는 멤버 옵션을 설정합니다 (Makestar 스타일)"}),m.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:m.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex gap-2 items-start p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:e.avatar_url?(0,a.jsx)(ex.default,{src:e.avatar_url,alt:e.member_name,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(null==(s=e.member_name)?void 0:s.charAt(0))||"?"})}),(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[(0,a.jsx)(w,{placeholder:"멤버 이름",value:e.member_name,onChange:e=>x(t,"member_name",e.target.value),className:"text-sm"}),(0,a.jsx)(w,{placeholder:"멤버 ID (선택)",value:e.member_id,onChange:e=>x(t,"member_id",e.target.value),className:"text-sm"}),(0,a.jsx)(w,{placeholder:"프로필 이미지 URL",value:e.avatar_url||"",onChange:e=>x(t,"avatar_url",e.target.value),className:"text-sm col-span-2"})]}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500",onClick:()=>(e=>{let t=m.filter((t,s)=>s!==e);o("member_options",t),0===t.length&&o("has_member_selection",!1)})(t),children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]},t)})}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{o("member_options",[...m,{member_name:"",member_id:"",avatar_url:"",additional_info:""}]),o("has_member_selection",!0)},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"멤버 추가"]})]})}),(0,a.jsx)(v,{id:"items",title:"포함 구성 ".concat(u.length>0?"(".concat(u.length,"개)"):""),icon:(0,a.jsx)(ev.A,{className:"h-4 w-4 text-green-500"}),children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"이 리워드에 포함된 아이템 목록"}),u.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:u.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-start p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"relative w-12 h-12 rounded overflow-hidden bg-gray-200 flex-shrink-0",children:e.image_url?(0,a.jsx)(ex.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(F.A,{className:"h-5 w-5 text-gray-300"})})}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(w,{placeholder:"아이템 이름",value:e.name,onChange:e=>h(t,"name",e.target.value),className:"text-sm flex-1"}),(0,a.jsx)(w,{type:"number",placeholder:"수량",value:e.quantity||"",onChange:e=>h(t,"quantity",parseInt(e.target.value)||1),className:"text-sm w-20"})]}),(0,a.jsx)(w,{placeholder:"설명 (선택)",value:e.description||"",onChange:e=>h(t,"description",e.target.value),className:"text-sm"}),(0,a.jsx)(w,{placeholder:"이미지 URL (선택)",value:e.image_url||"",onChange:e=>h(t,"image_url",e.target.value),className:"text-sm"})]}),(0,a.jsx)(j.Button,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500",onClick:()=>{o("included_items",u.filter((e,s)=>s!==t))},children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]},t))}),(0,a.jsxs)(j.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{o("included_items",[...u,{name:"",quantity:1,description:"",image_url:""}])},children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"아이템 추가"]})]})}),(0,a.jsx)(v,{id:"shipping",title:"배송 정보",icon:(0,a.jsx)(ef.A,{className:"h-4 w-4 text-blue-500"}),children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"예상 배송일"}),(0,a.jsx)(w,{type:"date",value:(null==(t=s.estimated_delivery_at)?void 0:t.split("T")[0])||"",onChange:e=>o("estimated_delivery_at",e.target.value?"".concat(e.target.value,"T00:00:00Z"):void 0),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{className:"text-xs text-gray-500",children:"배송 안내"}),(0,a.jsx)(et,{placeholder:"예: 펀딩 종료 후 약 2주 내 순차 발송",value:s.shipping_info||"",onChange:e=>o("shipping_info",e.target.value),rows:2,className:"mt-1"})]})]})})]})}function eN(e){let{title:t,children:s,defaultOpen:r=!0}=e,[n,i]=(0,l.useState)(r);return(0,a.jsxs)("section",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("button",{type:"button",className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",onClick:()=>i(!n),children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:t}),n?(0,a.jsx)(c.A,{className:"h-5 w-5 text-gray-400"}):(0,a.jsx)(d.A,{className:"h-5 w-5 text-gray-400"})]}),n&&(0,a.jsx)("div",{className:"px-6 pb-6",children:s})]})}function ew(e){let{id:t}=e;(0,r.useRouter)();let[n,v]=(0,l.useState)(null),[f,y]=(0,l.useState)([]),[b,N]=(0,l.useState)([]),[w,_]=(0,l.useState)(!0),[C,k]=(0,l.useState)(!1),[A,D]=(0,l.useState)(null),[B,z]=(0,l.useState)(null),[T,P]=(0,l.useState)(""),[L,E]=(0,l.useState)(""),[O,R]=(0,l.useState)(""),[q,I]=(0,l.useState)(""),[U,G]=(0,l.useState)(""),[M,F]=(0,l.useState)(""),[H,K]=(0,l.useState)(0),[W,Y]=(0,l.useState)(0),[V,J]=(0,l.useState)(""),[Z,et]=(0,l.useState)([]),[es,ea]=(0,l.useState)({}),[er,en]=(0,l.useState)([]),[ec,ed]=(0,l.useState)([]),[ex,eu]=(0,l.useState)({items:[],total:0,currency:"DT"}),[eh,ej]=(0,l.useState)([]),[ev,ef]=(0,l.useState)({members:[]}),[ey,ew]=(0,l.useState)([]),[e_,eC]=(0,l.useState)(null);(0,l.useEffect)(()=>{!async function(){if(_(!0),$.Gc){let e=(0,$.jz)(t);if(!e){D("캠페인을 찾을 수 없습니다"),_(!1);return}v(e),P(e.title),E(e.subtitle||""),R(e.category||""),I(e.cover_image_url||""),G(e.description_md||""),F(e.description_html||""),K(e.goal_amount_dt),Y(e.current_amount_dt||0),J(e.end_at?e.end_at.split("T")[0]:""),et(e.gallery_images||[]),ea(e.event_schedule||{}),en(e.benefits||[]),ed(e.stretch_goals||[]),eu(e.budget_info||{items:[],total:0,currency:"DT"}),ej(e.schedule_info||[]),ef(e.team_info||{members:[]}),ew(e.notices||[]),y((0,$.Gz)(t)),N((0,$.AX)(t)),_(!1);return}let{createClient:e}=await Promise.resolve().then(s.bind(s,8525)),a=e(),{data:l,error:r}=await a.from("funding_campaigns").select("*").eq("id",t).single();if(r||!l){D("캠페인을 찾을 수 없습니다"),_(!1);return}let{data:{user:n}}=await a.auth.getUser();if(l.creator_id!==(null==n?void 0:n.id)){D("이 캠페인을 수정할 권한이 없습니다"),_(!1);return}if(!["draft","rejected"].includes(l.status)){D("이 캠페인은 수정할 수 없습니다"),_(!1);return}v(l),P(l.title),E(l.subtitle||""),R(l.category||""),I(l.cover_image_url||""),G(l.description_md||""),F(l.description_html||""),K(l.goal_amount_dt),Y(l.current_amount_dt||0),J(l.end_at?l.end_at.split("T")[0]:""),et(l.gallery_images||[]),ea(l.event_schedule||{}),en(l.benefits||[]),ed(l.stretch_goals||[]),eu(l.budget_info||{items:[],total:0,currency:"DT"}),ej(l.schedule_info||[]),ef(l.team_info||{members:[]}),ew(l.notices||[]);let{data:i}=await a.from("funding_reward_tiers").select("*").eq("campaign_id",t).order("display_order");y(i||[]);let{data:c}=await a.from("funding_faq_items").select("*").eq("campaign_id",t).order("display_order");N(c||[]),_(!1)}()},[t]);let ek=(0,l.useCallback)(async()=>{k(!0),D(null);try{if($.Gc){await new Promise(e=>setTimeout(e,500)),z(new Date);return}let{createClient:e}=await Promise.resolve().then(s.bind(s,8525)),a=e(),{error:l}=await a.from("funding_campaigns").update({title:T,subtitle:L||null,category:O||null,cover_image_url:q||null,description_md:U||null,description_html:M||null,goal_amount_dt:H,end_at:V?new Date(V).toISOString():null,gallery_images:Z,event_schedule:es,benefits:er,stretch_goals:ec,budget_info:ex,schedule_info:eh,team_info:ev,notices:ey}).eq("id",t);if(l)throw l;z(new Date)}catch(e){D(e instanceof Error?e.message:"저장에 실패했습니다")}finally{k(!1)}},[t,T,L,O,q,U,M,H,V,Z,es,er,ec,ex,eh,ev,ey]);(0,l.useEffect)(()=>{let e=setInterval(()=>{n&&!C&&ek()},3e4);return()=>clearInterval(e)},[n,C,ek]);let eA=async()=>{if($.Gc){let e={id:"tier-".concat(Date.now()),campaign_id:t,title:"새 리워드",price_dt:100,display_order:f.length,is_active:!0,is_featured:!1,pledge_count:0,member_options:[],included_items:[]};y([...f,e]),eC(e.id);return}let{createClient:e}=await Promise.resolve().then(s.bind(s,8525)),a=e(),{data:l,error:r}=await a.from("funding_reward_tiers").insert({campaign_id:t,title:"새 리워드",price_dt:100,display_order:f.length}).select().single();!r&&l&&(y([...f,l]),eC(l.id))},eD=async(e,t)=>{if($.Gc)return void y(f.map(s=>s.id===e?{...s,...t}:s));let{createClient:a}=await Promise.resolve().then(s.bind(s,8525)),l=a(),{error:r}=await l.from("funding_reward_tiers").update(t).eq("id",e);r||y(f.map(s=>s.id===e?{...s,...t}:s))},eS=async e=>{if($.Gc)return void y(f.filter(t=>t.id!==e));let{createClient:t}=await Promise.resolve().then(s.bind(s,8525)),a=t(),{error:l}=await a.from("funding_reward_tiers").delete().eq("id",e);l||y(f.filter(t=>t.id!==e))},eB=async()=>{if($.Gc){let e={id:"faq-".concat(Date.now()),campaign_id:t,question:"질문을 입력하세요",answer:"답변을 입력하세요",display_order:b.length};N([...b,e]);return}let{createClient:e}=await Promise.resolve().then(s.bind(s,8525)),a=e(),{data:l,error:r}=await a.from("funding_faq_items").insert({campaign_id:t,question:"질문을 입력하세요",answer:"답변을 입력하세요",display_order:b.length}).select().single();!r&&l&&N([...b,l])},ez=async(e,t)=>{if($.Gc)return void N(b.map(s=>s.id===e?{...s,...t}:s));let{createClient:a}=await Promise.resolve().then(s.bind(s,8525)),l=a(),{error:r}=await l.from("funding_faq_items").update(t).eq("id",e);r||N(b.map(s=>s.id===e?{...s,...t}:s))},eT=async e=>{if($.Gc)return void N(b.filter(t=>t.id!==e));let{createClient:t}=await Promise.resolve().then(s.bind(s,8525)),a=t(),{error:l}=await a.from("funding_faq_items").delete().eq("id",e);l||N(b.filter(t=>t.id!==e))};return w?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"})}):A&&!n?(0,a.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-12",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:A}),(0,a.jsx)(i(),{href:"/studio",children:(0,a.jsx)(j.Button,{variant:"outline",children:"대시보드로 돌아가기"})})]}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto pb-20",children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-gray-50 py-4 mb-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i(),{href:"/studio",className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(o.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"캠페인 수정"}),B&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["마지막 저장: ",B.toLocaleTimeString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(j.Button,{variant:"outline",onClick:ek,loading:C,children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"저장"]}),(0,a.jsx)(i(),{href:"/studio/campaigns/".concat(t,"/preview"),children:(0,a.jsxs)(j.Button,{variant:"outline",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"미리보기"]})}),(0,a.jsx)(i(),{href:"/studio/campaigns/".concat(t,"/submit"),children:(0,a.jsxs)(j.Button,{children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"제출하기"]})})]})]})}),A&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-100 rounded-xl text-red-600",children:A}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(eN,{title:"기본 정보",defaultOpen:!0,children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"캠페인 제목 *"}),(0,a.jsx)("input",{type:"text",value:T,onChange:e=>P(e.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",maxLength:100})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"부제목"}),(0,a.jsx)("input",{type:"text",value:L,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",maxLength:200})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"카테고리"}),(0,a.jsxs)("select",{value:O,onChange:e=>R(e.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"",children:"선택하세요"}),["K-POP","음악","영상","굿즈","이벤트","기타"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"커버 이미지"}),(0,a.jsx)(S,{bucket:"campaign-images",folder:"campaign-".concat(t,"/cover"),value:q,onChange:I,aspectRatio:16/9,placeholder:"커버 이미지 업로드 (권장 비율 16:9)",maxSizeMB:5})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"목표 금액 (DT) *"}),(0,a.jsx)("input",{type:"number",value:H,onChange:e=>K(parseInt(e.target.value)||0),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",min:100})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료일 *"}),(0,a.jsx)("input",{type:"date",value:V,onChange:e=>J(e.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",min:new Date(Date.now()+6048e5).toISOString().split("T")[0]})]})]})]})}),(0,a.jsx)(eN,{title:"갤러리 이미지",defaultOpen:!1,children:(0,a.jsx)(Q,{images:Z,onChange:et})}),(0,a.jsx)(eN,{title:"프로젝트 소개",defaultOpen:!1,children:(0,a.jsx)(X,{content:M,onChange:(e,t)=>{G(e),F(t)},campaignId:t})}),(0,a.jsx)(eN,{title:"이벤트 일정 (Makestar 스타일)",defaultOpen:!1,children:(0,a.jsx)(ee,{schedule:es,onChange:ea})}),(0,a.jsx)(eN,{title:"특전 안내 (Makestar 스타일)",defaultOpen:!1,children:(0,a.jsx)(el,{benefits:er,onChange:en})}),(0,a.jsx)(eN,{title:"스트레치 골 (Tumblbug 스타일)",defaultOpen:!1,children:(0,a.jsx)(ei,{goals:ec,currentAmountDt:W,onChange:ed})}),(0,a.jsx)(eN,{title:"예산 정보",defaultOpen:!1,children:(0,a.jsx)(eo,{budget:ex,onChange:eu})}),(0,a.jsx)(eN,{title:"일정 정보",defaultOpen:!1,children:(0,a.jsx)(em,{schedule:eh,onChange:ej})}),(0,a.jsx)(eN,{title:"팀 소개",defaultOpen:!1,children:(0,a.jsx)(eg,{team:ev,onChange:ef})}),(0,a.jsx)(eN,{title:"리워드 티어",defaultOpen:!0,children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(j.Button,{variant:"outline",size:"sm",onClick:eA,children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-1"}),"리워드 추가"]})}),0===f.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"아직 리워드가 없습니다. 리워드를 추가해주세요."}):(0,a.jsx)("div",{className:"space-y-4",children:f.map(e=>{let t=e_===e.id;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>eC(t?null:e.id),children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-gray-400 cursor-grab"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsxs)("span",{className:"text-sm text-pink-600 font-bold",children:[e.price_dt.toLocaleString()," DT"]}),e.badge_type&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 bg-pink-100 text-pink-700 rounded-full",children:e.badge_label||e.badge_type})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),eS(e.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,a.jsx)(p.A,{className:"w-4 h-4"})}),t?(0,a.jsx)(c.A,{className:"w-5 h-5 text-gray-400"}):(0,a.jsx)(d.A,{className:"w-5 h-5 text-gray-400"})]})]}),t&&(0,a.jsxs)("div",{className:"p-4 space-y-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"리워드 이름 *"}),(0,a.jsx)("input",{type:"text",value:e.title,onChange:t=>eD(e.id,{title:t.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"리워드 이름"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"가격 (DT) *"}),(0,a.jsx)("input",{type:"number",value:e.price_dt,onChange:t=>eD(e.id,{price_dt:parseInt(t.target.value)||0}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"가격 (DT)",min:1})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"설명"}),(0,a.jsx)("textarea",{value:e.description||"",onChange:t=>eD(e.id,{description:t.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"리워드 설명",rows:2})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.is_featured,onChange:t=>eD(e.id,{is_featured:t.target.checked}),className:"rounded border-gray-300 text-primary-500 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"추천 리워드"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"수량 제한:"}),(0,a.jsx)("input",{type:"number",value:e.total_quantity||"",onChange:t=>{let s=t.target.value?parseInt(t.target.value):null;eD(e.id,{total_quantity:s,remaining_quantity:s})},className:"w-20 px-2 py-1 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"무제한",min:1})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,a.jsx)(eb,{tier:e,onChange:t=>eD(e.id,t)})})]})]},e.id)})})]})}),(0,a.jsx)(eN,{title:"자주 묻는 질문",defaultOpen:!1,children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(j.Button,{variant:"outline",size:"sm",onClick:eB,children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-1"}),"질문 추가"]})}),0===b.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"FAQ가 없습니다. 질문을 추가해주세요."}):(0,a.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-gray-400 mt-2 cursor-grab"}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsx)("input",{type:"text",value:e.question,onChange:t=>ez(e.id,{question:t.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"질문"}),(0,a.jsx)("textarea",{value:e.answer,onChange:t=>ez(e.id,{answer:t.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"답변",rows:2})]}),(0,a.jsx)("button",{onClick:()=>eT(e.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,a.jsx)(p.A,{className:"w-4 h-4"})})]})},e.id))})]})}),(0,a.jsx)(eN,{title:"유의사항",defaultOpen:!1,children:(0,a.jsx)(ep,{notices:ey,onChange:ew})})]})]})}}},e=>{e.O(0,[5004,277,2619,4909,5417,5239,6502,7376,8441,1255,7358],()=>e(e.s=1715)),_N_E=e.O()}]);