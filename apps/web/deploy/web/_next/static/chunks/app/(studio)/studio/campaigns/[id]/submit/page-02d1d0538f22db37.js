(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5958],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},1614:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var a=r(5155),s=r(2115),i=r(63),n=r(2619),l=r.n(n),c=r(5626),o=r(2529),d=r(8874),m=r(8085),u=r(7003),h=r(4074),x=r(7376),g=r(5704);function y(e){let{id:t}=e,n=(0,i.useRouter)(),[y,f]=(0,s.useState)(null),[p,b]=(0,s.useState)([]),[w,j]=(0,s.useState)(!0),[v,N]=(0,s.useState)(!1),[_,k]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){if(x.Gc){let e=(0,x.jz)(t);e&&(f(e),b((0,x.Gz)(t))),j(!1);return}let{createClient:e}=await Promise.all([r.e(5417),r.e(8525)]).then(r.bind(r,8525)),a=e(),{data:s}=await a.from("funding_campaigns").select("*").eq("id",t).single();s&&f(s);let{data:i}=await a.from("funding_reward_tiers").select("*").eq("campaign_id",t).eq("is_active",!0);b(i||[]),j(!1)}()},[t]);let A=y?[{label:"캠페인 제목",isValid:!!y.title&&y.title.length>=5,message:y.title&&y.title.length>=5?y.title:"최소 5자 이상"},{label:"커버 이미지",isValid:!!y.cover_image_url,message:y.cover_image_url?"설정됨":"필수 항목"},{label:"프로젝트 소개",isValid:!!y.description_md&&y.description_md.length>=100,message:y.description_md&&y.description_md.length>=100?"".concat(y.description_md.length,"자"):"최소 100자 이상"},{label:"목표 금액",isValid:y.goal_amount_dt>=100,message:(0,h.wq)(y.goal_amount_dt)},{label:"종료일",isValid:!!y.end_at&&new Date(y.end_at)>new Date(Date.now()+6048e5),message:y.end_at?new Date(y.end_at).toLocaleDateString():"최소 7일 후"},{label:"리워드 티어",isValid:p.length>0,message:p.length>0?"".concat(p.length,"개 등록됨"):"최소 1개 필요"}]:[],S=A.every(e=>e.isValid),C=async()=>{if(S){N(!0),k(null);try{if(x.Gc){await new Promise(e=>setTimeout(e,1e3)),n.push("/studio");return}let{createClient:e}=await Promise.all([r.e(5417),r.e(8525)]).then(r.bind(r,8525)),a=e(),{data:{session:s}}=await a.auth.getSession();if(!s)throw Error("로그인이 필요합니다");let i=await fetch("".concat(g.env.NEXT_PUBLIC_SUPABASE_URL,"/functions/v1/funding-studio-submit"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.access_token)},body:JSON.stringify({campaignId:t})}),l=await i.json();if(!l.success)throw Error(l.error||"제출에 실패했습니다");n.push("/studio")}catch(e){k(e instanceof Error?e.message:"제출에 실패했습니다")}finally{N(!1)}}};return w?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"})}):y?(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[x.Gc&&(0,a.jsx)("div",{className:"mb-4 bg-amber-50 border border-amber-200 rounded-lg px-4 py-2 text-sm text-amber-800",children:"Demo Mode - Mock data is displayed"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)(l(),{href:"/studio/campaigns/".concat(t,"/edit"),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(c.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"캠페인 제출"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"심사를 위해 캠페인을 제출합니다"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-100 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"제출 전 확인"}),(0,a.jsx)("div",{className:"space-y-3",children:A.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.isValid?(0,a.jsx)(o.A,{className:"w-5 h-5 text-green-500"}):(0,a.jsx)(d.A,{className:"w-5 h-5 text-red-500"}),(0,a.jsx)("span",{className:"text-gray-700",children:e.label})]}),(0,a.jsx)("span",{className:e.isValid?"text-gray-500":"text-red-500",children:e.message})]},e.label))})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 rounded-xl p-4 mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-yellow-800 mb-2",children:"제출 전 안내"}),(0,a.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,a.jsx)("li",{children:"• 제출 후에는 목표 금액을 변경할 수 없습니다"}),(0,a.jsx)("li",{children:"• 심사는 영업일 기준 1-3일 소요됩니다"}),(0,a.jsx)("li",{children:"• 반려 시 수정 후 재제출이 가능합니다"})]})]}),_&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4 mb-6 text-red-600",children:_}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(l(),{href:"/studio/campaigns/".concat(t,"/edit"),children:(0,a.jsx)(u.Button,{variant:"outline",children:"수정하기"})}),(0,a.jsxs)(u.Button,{onClick:C,disabled:!S,loading:v,children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"심사 요청"]})]})]}):(0,a.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-12",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:"캠페인을 찾을 수 없습니다"}),(0,a.jsx)(l(),{href:"/studio",children:(0,a.jsx)(u.Button,{variant:"outline",children:"대시보드로 돌아가기"})})]})}},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(2115);let s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:t,...i,width:n,height:n,stroke:r,strokeWidth:c?24*Number(l)/Number(n):l,className:s("lucide",o),...u},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:l,...c}=r;return(0,a.createElement)(n,{ref:i,iconNode:t,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),l),...c})});return r.displayName="".concat(e),r}},2529:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3564:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(2821),s=r(5889);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4074:(e,t,r)=>{"use strict";r.d(t,{Yq:()=>o,gz:()=>l,io:()=>m,l9:()=>c,r6:()=>d,t4:()=>u,wq:()=>n});var a=r(6116),s=r(316),i=r(5507);function n(e){return new Intl.NumberFormat("ko-KR").format(e)+" DT"}function l(e){return new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e)}function c(e,t){return t<=0?0:Math.floor(e/t*100)}function o(e){let t="string"==typeof e?new Date(e):e;return(0,a.GP)(t,"yyyy.MM.dd",{locale:i.ko})}function d(e){let t="string"==typeof e?new Date(e):e;return(0,a.GP)(t,"yyyy.MM.dd HH:mm",{locale:i.ko})}function m(e){let t="string"==typeof e?new Date(e):e,r=(0,s.c)(t,new Date);return r<0?"마감됨":0===r?"오늘 마감":1===r?"내일 마감":"".concat(r,"일 남음")}function u(e){return e>=1e4?"".concat((e/1e4).toFixed(1),"만명"):e>=1e3?"".concat((e/1e3).toFixed(1),"천명"):"".concat(e,"명")}},5626:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7003:(e,t,r)=>{"use strict";r.d(t,{Button:()=>n});var a=r(5155),s=r(2115),i=r(3564);let n=(0,s.forwardRef)((e,t)=>{let{className:r,variant:s="primary",size:n="md",loading:l,disabled:c,children:o,...d}=e;return(0,a.jsxs)("button",{ref:t,className:(0,i.cn)("inline-flex items-center justify-center font-medium transition-colors rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border-2 border-gray-200 text-gray-700 hover:border-primary-500 hover:text-primary-500 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500"}[s],{sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[n],r),disabled:c||l,...d,children:[l&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]})});n.displayName="Button"},7843:(e,t,r)=>{Promise.resolve().then(r.bind(r,1614))},8085:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},8874:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},e=>{e.O(0,[2619,4909,5837,7376,8441,1255,7358],()=>e(e.s=7843)),_N_E=e.O()}]);