(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7923,8525],{63:(e,r,t)=>{"use strict";var s=t(7260);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},685:(e,r,t)=>{Promise.resolve().then(t.bind(t,3497))},1847:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var s=t(2115);let a=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,r)=>{let{color:t="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:r,...l,width:n,height:n,stroke:t,strokeWidth:c?24*Number(i)/Number(n):i,className:a("lucide",d),...u},[...m.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...Array.isArray(o)?o:[o]])}),i=(e,r)=>{let t=(0,s.forwardRef)((t,l)=>{let{className:i,...c}=t;return(0,s.createElement)(n,{ref:l,iconNode:r,className:a("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),i),...c})});return t.displayName="".concat(e),t}},2529:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3497:(e,r,t)=>{"use strict";t.d(r,{default:()=>f});var s=t(5155),a=t(2115),l=t(63),n=t(2619),i=t.n(n),c=t(5626);let d=(0,t(1847).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var o=t(2529),m=t(8874),u=t(7003),x=t(4074),h=t(7376),g=t(5704);function f(e){let{id:r}=e,n=(0,l.useRouter)(),[f,p]=(0,a.useState)(null),[y,j]=(0,a.useState)(!0),[N,b]=(0,a.useState)(!1),[v,w]=(0,a.useState)(null),[_,k]=(0,a.useState)(""),[A,C]=(0,a.useState)(!1),E=(0,a.useMemo)(()=>{if(h.Gc)return null;let{createClient:e}=t(8525);return e()},[]);(0,a.useEffect)(()=>{!async function(){if(h.Gc){let e=(0,h.jz)(r);if(e){let t=(0,h.Gz)(r);p({...e,funding_reward_tiers:t})}else w("캠페인을 찾을 수 없습니다");j(!1);return}if(!E)return;let{data:e,error:t}=await E.from("funding_campaigns").select("\n          *,\n          funding_reward_tiers (*)\n        ").eq("id",r).single();t||!e?w("캠페인을 찾을 수 없습니다"):p(e),j(!1)}()},[r,E]);let S=async()=>{if(h.Gc||!E)return void alert("데모 모드에서는 승인 기능을 사용할 수 없습니다");b(!0),w(null);try{let{data:{session:e}}=await E.auth.getSession();if(!e)throw Error("로그인이 필요합니다");let t=await fetch("".concat(g.env.NEXT_PUBLIC_SUPABASE_URL,"/functions/v1/funding-admin-review"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token)},body:JSON.stringify({campaignId:r,action:"approve"})}),s=await t.json();if(!s.success)throw Error(s.error||"승인에 실패했습니다");n.push("/admin")}catch(e){w(e instanceof Error?e.message:"승인에 실패했습니다")}finally{b(!1)}},B=async()=>{if(!_.trim())return void w("반려 사유를 입력해주세요");if(h.Gc||!E)return void alert("데모 모드에서는 반려 기능을 사용할 수 없습니다");b(!0),w(null);try{let{data:{session:e}}=await E.auth.getSession();if(!e)throw Error("로그인이 필요합니다");let t=await fetch("".concat(g.env.NEXT_PUBLIC_SUPABASE_URL,"/functions/v1/funding-admin-review"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.access_token)},body:JSON.stringify({campaignId:r,action:"reject",reason:_})}),s=await t.json();if(!s.success)throw Error(s.error||"반려에 실패했습니다");n.push("/admin")}catch(e){w(e instanceof Error?e.message:"반려에 실패했습니다")}finally{b(!1)}};if(y)return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"})});if(!f)return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-12",children:[(0,s.jsx)("p",{className:"text-red-500 mb-4",children:v||"캠페인을 찾을 수 없습니다"}),(0,s.jsx)(i(),{href:"/admin",children:(0,s.jsx)(u.Button,{variant:"outline",children:"대시보드로 돌아가기"})})]});let P=(f.funding_reward_tiers||[]).sort((e,r)=>e.display_order-r.display_order);return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[h.Gc&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl text-yellow-800 text-sm",children:"\uD83C\uDFAD 데모 모드: 실제 승인/반려 기능은 비활성화되어 있습니다"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)(i(),{href:"/admin",className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(c.A,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"캠페인 심사"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"캠페인 내용을 검토하고 승인 또는 반려해주세요"})]}),(0,s.jsxs)(i(),{href:"/p/".concat(f.slug),target:"_blank",className:"text-primary-500 hover:text-primary-600 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"미리보기"}),(0,s.jsx)(d,{className:"w-4 h-4"})]})]}),v&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-100 rounded-xl text-red-600",children:v}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsx)("div",{className:"aspect-[16/9] bg-gray-100 rounded-xl overflow-hidden",children:f.cover_image_url?(0,s.jsx)("img",{src:f.cover_image_url,alt:f.title,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"기본 정보"}),(0,s.jsxs)("dl",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm text-gray-500",children:"제목"}),(0,s.jsx)("dd",{className:"font-medium",children:f.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm text-gray-500",children:"카테고리"}),(0,s.jsx)("dd",{className:"font-medium",children:f.category||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm text-gray-500",children:"목표 금액"}),(0,s.jsx)("dd",{className:"font-medium",children:(0,x.wq)(f.goal_amount_dt)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm text-gray-500",children:"종료일"}),(0,s.jsx)("dd",{className:"font-medium",children:f.end_at?(0,x.Yq)(f.end_at):"-"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("dt",{className:"text-sm text-gray-500",children:"부제목"}),(0,s.jsx)("dd",{className:"font-medium",children:f.subtitle||"-"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"프로젝트 소개"}),f.description_md?(0,s.jsx)("div",{className:"prose prose-gray max-w-none whitespace-pre-wrap",children:f.description_md}):(0,s.jsx)("p",{className:"text-gray-500",children:"소개 없음"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["리워드 티어 (",P.length,"개)"]}),P.length>0?(0,s.jsx)("div",{className:"space-y-3",children:P.map(e=>(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"font-medium",children:e.title}),(0,s.jsx)("span",{className:"font-bold text-primary-500",children:(0,x.wq)(e.price_dt)})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[e.total_quantity?"수량: ".concat(e.total_quantity,"개"):"무제한",e.is_featured&&" • 추천 리워드"]})]},e.id))}):(0,s.jsx)("p",{className:"text-gray-500",children:"등록된 리워드 없음"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"상태"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"현재 상태"}),(0,s.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-sm font-medium rounded",children:"submitted"===f.status?"심사 대기":f.status})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"생성일"}),(0,s.jsx)("span",{children:(0,x.Yq)(f.created_at)})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"심사"}),A?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"반려 사유 *"}),(0,s.jsx)("textarea",{value:_,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4,placeholder:"반려 사유를 입력해주세요"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(u.Button,{variant:"outline",className:"flex-1",onClick:()=>{C(!1),k("")},children:"취소"}),(0,s.jsx)(u.Button,{variant:"danger",className:"flex-1",onClick:B,loading:N,children:"반려하기"})]})]}):(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(u.Button,{className:"w-full",onClick:S,loading:N,children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"승인하기"]}),(0,s.jsxs)(u.Button,{variant:"outline",className:"w-full",onClick:()=>C(!0),children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"반려하기"]})]})]}),"```tsx",(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"검토 항목"}),(0,s.jsx)("ul",{className:"space-y-3 text-sm text-gray-600",children:[{id:"check-content",label:"제목과 내용이 일치"},{id:"check-image",label:"커버 이미지 적절"},{id:"check-price",label:"리워드 가격 적정"},{id:"check-inappropriate",label:"부적절한 내용 없음"},{id:"check-copyright",label:"저작권 문제 없음"}].map(e=>(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:e.id,className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:e.id,className:"cursor-pointer select-none",children:e.label})]},e.id))})]})]})]})]})}},3564:(e,r,t)=>{"use strict";t.d(r,{cn:()=>l});var s=t(2821),a=t(5889);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},4074:(e,r,t)=>{"use strict";t.d(r,{Yq:()=>d,gz:()=>i,io:()=>m,l9:()=>c,r6:()=>o,t4:()=>u,wq:()=>n});var s=t(6116),a=t(316),l=t(5507);function n(e){return new Intl.NumberFormat("ko-KR").format(e)+" DT"}function i(e){return new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e)}function c(e,r){return r<=0?0:Math.floor(e/r*100)}function d(e){let r="string"==typeof e?new Date(e):e;return(0,s.GP)(r,"yyyy.MM.dd",{locale:l.ko})}function o(e){let r="string"==typeof e?new Date(e):e;return(0,s.GP)(r,"yyyy.MM.dd HH:mm",{locale:l.ko})}function m(e){let r="string"==typeof e?new Date(e):e,t=(0,a.c)(r,new Date);return t<0?"마감됨":0===t?"오늘 마감":1===t?"내일 마감":"".concat(t,"일 남음")}function u(e){return e>=1e4?"".concat((e/1e4).toFixed(1),"만명"):e>=1e3?"".concat((e/1e3).toFixed(1),"천명"):"".concat(e,"명")}},5626:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7003:(e,r,t)=>{"use strict";t.d(r,{Button:()=>n});var s=t(5155),a=t(2115),l=t(3564);let n=(0,a.forwardRef)((e,r)=>{let{className:t,variant:a="primary",size:n="md",loading:i,disabled:c,children:d,...o}=e;return(0,s.jsxs)("button",{ref:r,className:(0,l.cn)("inline-flex items-center justify-center font-medium transition-colors rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border-2 border-gray-200 text-gray-700 hover:border-primary-500 hover:text-primary-500 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500"}[a],{sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[n],t),disabled:c||i,...o,children:[i&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})});n.displayName="Button"},8525:(e,r,t)=>{"use strict";t.r(r),t.d(r,{createClient:()=>l});var s=t(5417),a=t(5704);function l(){return(0,s.createBrowserClient)(a.env.NEXT_PUBLIC_SUPABASE_URL,a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},8874:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(1847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},e=>{e.O(0,[2619,4909,5417,5837,7376,8441,1255,7358],()=>e(e.s=685)),_N_E=e.O()}]);